<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TradeBotPro — Setup Wizard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="TradeBotPro client setup wizard — configure your AI assistant in a few simple steps."
  />

  <style>
    :root {
      --primary-blue: #1f4e79;
      --accent-blue: #00a3ff;
      --dark-text: #1b1b1f;
      --light-bg: #f5f7fa;
      --white: #ffffff;
      --border-soft: rgba(0, 0, 0, 0.08);
      --error-red: #b3261e;
      --success-green: #0f7b46;
    }

    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background: var(--light-bg);
      color: var(--dark-text);
      line-height: 1.6;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .inner {
      max-width: 1120px;
      margin: 0 auto;
      padding: 0 1.25rem;
    }

    header {
      background: var(--white);
      border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      padding: 0.8rem 0;
      font-size: 0.9rem;
    }

    .logo-wrap {
      display: flex;
      align-items: center;
      gap: 0.6rem;
    }

    .logo-icon {
      width: 32px;
      height: 32px;
      border-radius: 9px;
      background: var(--primary-blue);
      position: relative;
    }

    .logo-icon::before,
    .logo-icon::after {
      content: "";
      position: absolute;
      background: var(--white);
      border-radius: 4px;
    }

    .logo-icon::before {
      width: 12px;
      height: 18px;
      left: 7px;
      top: 7px;
    }

    .logo-icon::after {
      width: 6px;
      height: 12px;
      right: 7px;
      top: 10px;
    }

    .logo-main {
      font-weight: 700;
      font-size: 1.05rem;
      color: var(--primary-blue);
    }

    .logo-tag {
      font-size: 0.7rem;
      opacity: 0.7;
    }

    .nav-right {
      display: flex;
      gap: 0.75rem;
      align-items: center;
      font-size: 0.8rem;
      opacity: 0.85;
    }

    .nav-pill {
      padding: 0.2rem 0.7rem;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: #f0f3f9;
    }

    main {
      flex: 1;
      padding: 1.8rem 0 2.4rem;
    }

    /* WIZARD LAYOUT */

    .wizard-hero {
      margin-bottom: 1.5rem;
    }

    .wizard-hero h1 {
      margin: 0 0 0.3rem;
      font-size: 1.8rem;
      color: var(--primary-blue);
    }

    .wizard-hero p {
      margin: 0;
      font-size: 0.95rem;
      max-width: 40rem;
    }

    .wizard-layout {
      display: grid;
      grid-template-columns: minmax(0, 0.95fr) minmax(0, 1.4fr);
      gap: 1.8rem;
      align-items: flex-start;
    }

    /* SIDEBAR STEPS */

    .wizard-sidebar {
      background: var(--white);
      border-radius: 1rem;
      padding: 1.2rem 1.1rem;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.05);
      font-size: 0.88rem;
    }

    .wizard-steps {
      list-style: none;
      margin: 0 0 1rem;
      padding: 0;
    }

    .wizard-step-item {
      display: flex;
      align-items: center;
      gap: 0.55rem;
      padding: 0.4rem 0;
      opacity: 0.7;
    }

    .wizard-step-item.active {
      opacity: 1;
      font-weight: 600;
      color: var(--primary-blue);
    }

    .wizard-step-item.completed {
      opacity: 0.9;
    }

    .wizard-step-badge {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      background: #f0f3f9;
    }

    .wizard-step-item.active .wizard-step-badge {
      background: var(--primary-blue);
      color: var(--white);
      border-color: var(--primary-blue);
    }

    .wizard-step-item.completed .wizard-step-badge {
      background: #0f7b46;
      border-color: #0f7b46;
      color: #ffffff;
    }

    .wizard-sidebar-note {
      font-size: 0.78rem;
      opacity: 0.75;
      border-top: 1px dashed var(--border-soft);
      padding-top: 0.7rem;
      margin-top: 0.7rem;
    }

    /* CONTENT / FORM */

    .wizard-card {
      background: var(--white);
      border-radius: 1rem;
      padding: 1.4rem 1.5rem 1.3rem;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.06);
      font-size: 0.92rem;
    }

    .wizard-step-title {
      font-size: 1.1rem;
      margin: 0 0 0.25rem;
      color: var(--primary-blue);
    }

    .wizard-step-lead {
      margin: 0 0 1.1rem;
      font-size: 0.9rem;
      opacity: 0.85;
    }

    .wizard-grid-2 {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
    }

    .field-group {
      margin-bottom: 0.85rem;
    }

    .field-group label {
      display: block;
      font-size: 0.8rem;
      margin-bottom: 0.25rem;
      font-weight: 500;
    }

    .field-group small {
      display: block;
      font-size: 0.75rem;
      opacity: 0.7;
      margin-top: 0.1rem;
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"],
    textarea,
    select {
      width: 100%;
      padding: 0.55rem 0.65rem;
      border-radius: 0.5rem;
      border: 1px solid rgba(0, 0, 0, 0.16);
      font: inherit;
      resize: vertical;
    }

    textarea {
      min-height: 80px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: 2px solid rgba(31, 78, 121, 0.4);
      border-color: transparent;
    }

    /* CHIP BUTTONS */

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.45rem;
      margin-top: 0.25rem;
    }

    .chip-input {
      display: none;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.3rem 0.8rem;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      font-size: 0.8rem;
      background: #f7f9fc;
      cursor: pointer;
      user-select: none;
      white-space: nowrap;
    }

    .chip.chip-selected {
      background: var(--primary-blue);
      color: #ffffff;
      border-color: var(--primary-blue);
      font-weight: 500;
    }

    .chip.chip-muted {
      opacity: 0.8;
    }

    /* TOGGLE */

    .toggle-row {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      font-size: 0.85rem;
    }

    .toggle-row input[type="checkbox"] {
      width: 18px;
      height: 18px;
    }

    /* INTERNAL BOX */

    .internal-box {
      margin-top: 1.1rem;
      padding: 0.9rem 1rem;
      border-radius: 0.9rem;
      border: 1px dashed rgba(0, 0, 0, 0.16);
      background: #fbfcff;
      font-size: 0.8rem;
    }

    .internal-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--accent-blue);
      margin-bottom: 0.2rem;
    }

    .internal-note {
      opacity: 0.7;
      margin-bottom: 0.4rem;
    }

    /* CALENDAR PREVIEW */

    .calendar-preview {
      margin-top: 0.6rem;
      border-radius: 0.9rem;
      border: 1px solid var(--border-soft);
      overflow: hidden;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.55rem 0.8rem;
      background: #f1f4fb;
      font-size: 0.82rem;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      font-size: 0.78rem;
    }

    .calendar-day,
    .calendar-cell {
      padding: 0.4rem 0.3rem;
      border-top: 1px solid var(--border-soft);
      border-right: 1px solid var(--border-soft);
      min-height: 52px;
    }

    .calendar-day:last-child,
    .calendar-cell:last-child {
      border-right: none;
    }

    .calendar-day {
      background: #fafbff;
      font-weight: 500;
      text-align: center;
    }

    .calendar-cell {
      position: relative;
    }

    .calendar-job {
      display: inline-block;
      margin-top: 0.2rem;
      padding: 0.15rem 0.35rem;
      border-radius: 0.45rem;
      background: rgba(31, 78, 121, 0.12);
      font-size: 0.72rem;
      white-space: nowrap;
    }

    /* STATUS */

    #wizard-status {
      margin-top: 0.9rem;
      font-size: 0.82rem;
    }

    .status-error {
      color: var(--error-red);
    }

    .status-success {
      color: var(--success-green);
    }

    /* NAV BUTTONS */

    .wizard-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.7rem;
      margin-top: 1.1rem;
      border-top: 1px solid rgba(0, 0, 0, 0.06);
      padding-top: 0.9rem;
    }

    .wizard-nav-left {
      font-size: 0.8rem;
      opacity: 0.8;
    }

    .wizard-nav-buttons {
      display: flex;
      gap: 0.6rem;
    }

    button {
      font: inherit;
      cursor: pointer;
      border-radius: 999px;
      border: none;
    }

    .btn-secondary,
    .btn-primary {
      padding: 0.5rem 1.15rem;
      font-size: 0.9rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.3rem;
      text-align: center;
    }

    .btn-secondary {
      background: #eef2f8;
      color: var(--primary-blue);
      border: 1px solid var(--border-soft);
    }

    .btn-secondary:disabled {
      opacity: 0.45;
      cursor: default;
    }

    .btn-primary {
      background: var(--primary-blue);
      color: #ffffff;
    }

    .btn-primary:hover {
      background: #163857;
    }

    .btn-primary:disabled {
      opacity: 0.6;
      cursor: default;
    }

    /* RESPONSIVE */

    @media (max-width: 860px) {
      .wizard-layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 520px) {
      .wizard-nav {
        flex-direction: column;
        align-items: stretch;
      }

      .wizard-nav-buttons {
        justify-content: space-between;
      }

      .btn-secondary,
      .btn-primary {
        flex: 1;
      }
    }
  </style>
</head>
<body>
<div class="page">
  <header>
    <div class="inner">
      <div class="nav">
        <div class="logo-wrap">
          <div class="logo-icon" aria-hidden="true"></div>
          <div>
            <div class="logo-main">TradeBotPro</div>
            <div class="logo-tag">Client setup wizard</div>
          </div>
        </div>
        <div class="nav-right">
          <span class="nav-pill">Demo account</span>
          <span id="user-id-pill" title="Signup / user ID">(loading…)</span>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="inner">
      <section class="wizard-hero">
        <h1>Get your AI assistant ready in 4 steps</h1>
        <p>
          We’ll use this information to tune TradeBotPro for your trade, area and pricing.
          You can come back and change these settings at any time.
        </p>
      </section>

      <div class="wizard-layout">
        <!-- LEFT: steps -->
        <aside class="wizard-sidebar">
          <ol class="wizard-steps">
            <li class="wizard-step-item active" data-step="1">
              <span class="wizard-step-badge">1</span>
              <span>Business basics</span>
            </li>
            <li class="wizard-step-item" data-step="2">
              <span class="wizard-step-badge">2</span>
              <span>Service area & jobs</span>
            </li>
            <li class="wizard-step-item" data-step="3">
              <span class="wizard-step-badge">3</span>
              <span>AI style & messaging</span>
            </li>
            <li class="wizard-step-item" data-step="4">
              <span class="wizard-step-badge">4</span>
              <span>Demo & go-live</span>
            </li>
          </ol>

          <div class="wizard-sidebar-note">
            <strong>Tip:</strong> For most questions you can just tap the suggested options.
            You don’t have to write long notes unless you want to.
          </div>
        </aside>

        <!-- RIGHT: step content -->
        <section class="wizard-card">
          <form id="setup-form" novalidate>
            <!-- STEP 1 -->
            <div class="wizard-step" data-step="1">
              <h2 class="wizard-step-title">Step 1 — Business basics</h2>
              <p class="wizard-step-lead">
                Confirm the core details so your AI always introduces you correctly and knows how to contact you.
              </p>

              <div class="wizard-grid-2">
                <div class="field-group">
                  <label for="business_name">Business name</label>
                  <input id="business_name" name="business_name" type="text" required />
                  <small>How you want TradeBotPro to introduce you.</small>
                </div>

                <div class="field-group">
                  <label for="contact_name">Main contact name</label>
                  <input id="contact_name" name="contact_name" type="text" required />
                  <small>Usually the owner or person who takes the jobs.</small>
                </div>

                <div class="field-group">
                  <label for="email">Best email for confirmations</label>
                  <input id="email" name="email" type="email" required />
                  <small>Booking confirmations, quotes and reports will go here.</small>
                </div>

                <div class="field-group">
                  <label for="whatsapp_number">Mobile / WhatsApp number</label>
                  <input id="whatsapp_number" name="whatsapp_number" type="tel" required />
                  <small>The number TradeBotPro will use for WhatsApp.</small>
                </div>
              </div>

              <div class="field-group">
                <label>What trade are you?</label>
                <div class="chip-row" data-chip-group="trade_type" data-chip-type="single">
                  <input class="chip-input" type="radio" name="trade_type" id="trade_plumber" value="Plumber" />
                  <label class="chip" for="trade_plumber">Plumber</label>

                  <input class="chip-input" type="radio" name="trade_type" id="trade_heating" value="Heating engineer" />
                  <label class="chip" for="trade_heating">Heating / Gas</label>

                  <input class="chip-input" type="radio" name="trade_type" id="trade_electrician" value="Electrician" />
                  <label class="chip" for="trade_electrician">Electrician</label>

                  <input class="chip-input" type="radio" name="trade_type" id="trade_builder" value="Builder" />
                  <label class="chip" for="trade_builder">Builder / Multi-trade</label>

                  <input class="chip-input" type="radio" name="trade_type" id="trade_other" value="Other" />
                  <label class="chip" for="trade_other">Other</label>
                </div>
                <small>If “Other”, we’ll ask you for more detail later.</small>
              </div>

              <div class="field-group">
                <label>How should TradeBotPro introduce your business?</label>
                <div class="chip-row" data-chip-group="intro_style" data-chip-type="single">
                  <input class="chip-input" type="radio" name="intro_style" id="intro_friendly" value="Friendly" />
                  <label class="chip" for="intro_friendly">Friendly & chatty</label>

                  <input class="chip-input" type="radio" name="intro_style" id="intro_straight" value="Straight to the point" />
                  <label class="chip" for="intro_straight">Straight to the point</label>

                  <input class="chip-input" type="radio" name="intro_style" id="intro_formal" value="Professional" />
                  <label class="chip" for="intro_formal">Very professional</label>
                </div>
              </div>
            </div>

            <!-- STEP 2 -->
            <div class="wizard-step" data-step="2" hidden>
              <h2 class="wizard-step-title">Step 2 — Service area & jobs</h2>
              <p class="wizard-step-lead">
                Tell us where you work and what kind of jobs you want TradeBotPro to say “yes” to.
                We’ll always use postcodes rather than town names.
              </p>

              <div class="wizard-grid-2">
                <div class="field-group">
                  <label for="base_postcode">Base postcode</label>
                  <input id="base_postcode" name="base_postcode" type="text" required />
                  <small>Your main depot / home postcode (e.g. OX5 2NP).</small>
                </div>

                <div class="field-group">
                  <label>Normal travel radius from base</label>
                  <div class="chip-row" data-chip-group="radius" data-chip-type="single">
                    <input class="chip-input" type="radio" name="radius" id="radius_10" value="10" />
                    <label class="chip" for="radius_10">Up to 10 miles</label>

                    <input class="chip-input" type="radio" name="radius" id="radius_15" value="15" />
                    <label class="chip" for="radius_15">Up to 15 miles</label>

                    <input class="chip-input" type="radio" name="radius" id="radius_20" value="20" />
                    <label class="chip" for="radius_20">Up to 20 miles</label>

                    <input class="chip-input" type="radio" name="radius" id="radius_custom" value="Custom" />
                    <label class="chip" for="radius_custom">Custom</label>
                  </div>
                  <small>We’ll use this to decide which postcodes to accept automatically.</small>
                </div>
              </div>

              <div class="field-group">
                <label for="service_postcodes">Key postcodes you always cover</label>
                <textarea id="service_postcodes" name="service_postcodes"
                  placeholder="Example: OX1, OX2, OX3, OX5, HP14…"></textarea>
                <small>
                  Just type the outward codes or full postcodes. We’ll make this smarter later with your zone maps.
                </small>
              </div>

              <div class="field-group">
                <label>What type of jobs do you actually want?</label>
                <div class="chip-row" data-chip-group="job_types" data-chip-type="multi">
                  <input class="chip-input" type="checkbox" id="job_emergency" value="Emergency callouts" />
                  <label class="chip" for="job_emergency">Emergency call-outs</label>

                  <input class="chip-input" type="checkbox" id="job_boiler" value="Boiler service" />
                  <label class="chip" for="job_boiler">Boiler service / annual</label>

                  <input class="chip-input" type="checkbox" id="job_repairs" value="Repairs & faults" />
                  <label class="chip" for="job_repairs">Repairs & faults</label>

                  <input class="chip-input" type="checkbox" id="job_installs" value="Installs & upgrades" />
                  <label class="chip" for="job_installs">Installs & upgrades</label>

                  <input class="chip-input" type="checkbox" id="job_landlord" value="Landlord certs" />
                  <label class="chip" for="job_landlord">Landlord / safety certs</label>

                  <input class="chip-input" type="checkbox" id="job_other" value="Other" />
                  <label class="chip" for="job_other">Other</label>
                </div>
                <small>We’ll nudge customers towards the work you actually want.</small>
              </div>

              <div class="field-group">
                <label>Rough pricing style</label>
                <div class="chip-row" data-chip-group="pricing_style" data-chip-type="single">
                  <input class="chip-input" type="radio" name="pricing_style" id="price_callout" value="Callout plus hourly" />
                  <label class="chip" for="price_callout">Call-out + hourly</label>

                  <input class="chip-input" type="radio" name="pricing_style" id="price_fixed" value="Fixed price jobs" />
                  <label class="chip" for="price_fixed">Fixed price for common jobs</label>

                  <input class="chip-input" type="radio" name="pricing_style" id="price_quote" value="Quotes only" />
                  <label class="chip" for="price_quote">Always quote first</label>
                </div>
                <small>We’ll still confirm exact numbers with you in the backend.</small>
              </div>
            </div>

            <!-- STEP 3 -->
            <div class="wizard-step" data-step="3" hidden>
              <h2 class="wizard-step-title">Step 3 — AI style & messaging</h2>
              <p class="wizard-step-lead">
                Decide how TradeBotPro should sound, what it’s allowed to promise, and when it should hand over to you.
              </p>

              <div class="field-group">
                <label>How should TradeBotPro talk to customers?</label>
                <div class="chip-row" data-chip-group="tone" data-chip-type="single">
                  <input class="chip-input" type="radio" name="tone" id="tone_super_friendly" value="Super friendly" />
                  <label class="chip" for="tone_super_friendly">Super friendly & emoji</label>

                  <input class="chip-input" type="radio" name="tone" id="tone_plain" value="Plain English" />
                  <label class="chip" for="tone_plain">Plain English, no waffle</label>

                  <input class="chip-input" type="radio" name="tone" id="tone_formal" value="Formal" />
                  <label class="chip" for="tone_formal">Formal & polished</label>
                </div>
              </div>

              <div class="field-group">
                <label>When is the AI allowed to book jobs?</label>
                <div class="chip-row" data-chip-group="booking_rules" data-chip-type="single">
                  <input class="chip-input" type="radio" name="booking_rules" id="book_all" value="Anytime within hours" />
                  <label class="chip" for="book_all">Any time within working hours</label>

                  <input class="chip-input" type="radio" name="booking_rules" id="book_office" value="Office hours only" />
                  <label class="chip" for="book_office">Only office hours</label>

                  <input class="chip-input" type="radio" name="booking_rules" id="book_check" value="Ask me before booking" />
                  <label class="chip" for="book_check">Ask me before booking</label>
                </div>
              </div>

              <div class="wizard-grid-2">
                <div class="field-group">
                  <label>What should happen with new enquiries at night?</label>
                  <div class="chip-row" data-chip-group="night_rules" data-chip-type="single">
                    <input class="chip-input" type="radio" name="night_rules" id="night_hold" value="Hold & schedule" />
                    <label class="chip" for="night_hold">Hold and schedule next day</label>

                    <input class="chip-input" type="radio" name="night_rules" id="night_quote" value="Rough quote only" />
                    <label class="chip" for="night_quote">Give rough quote only</label>

                    <input class="chip-input" type="radio" name="night_rules" id="night_emergency" value="Emergency only" />
                    <label class="chip" for="night_emergency">Only emergency jobs</label>
                  </div>
                </div>

                <div class="field-group">
                  <label>Reviews & follow-up</label>
                  <div class="chip-row" data-chip-group="reviews" data-chip-type="single">
                    <input class="chip-input" type="radio" name="reviews" id="reviews_every" value="Every job" />
                    <label class="chip" for="reviews_every">Ask for Google review after every job</label>

                    <input class="chip-input" type="radio" name="reviews" id="reviews_big" value="Big jobs only" />
                    <label class="chip" for="reviews_big">Only for bigger jobs</label>

                    <input class="chip-input" type="radio" name="reviews" id="reviews_off" value="Off for now" />
                    <label class="chip" for="reviews_off">Don’t ask for reviews yet</label>
                  </div>
                </div>
              </div>

              <div class="field-group">
                <label for="ai_notes">Anything specific TradeBotPro must know?</label>
                <textarea id="ai_notes" name="ai_notes"
                  placeholder="Example: We don’t touch oil boilers. We only cover landlords within 10 miles. We never give exact prices on WhatsApp…"></textarea>
                <small>Optional — we’ll turn this into AI instructions behind the scenes.</small>
              </div>
            </div>

            <!-- STEP 4 -->
            <div class="wizard-step" data-step="4" hidden>
              <h2 class="wizard-step-title">Step 4 — Demo & go-live</h2>
              <p class="wizard-step-lead">
                Choose how you want to test TradeBotPro and when you’re ready for real customers.
                You’ll be able to spend an evening “talking to yourself” from another phone before going fully live.
              </p>

              <div class="field-group">
                <label>Demo mode (5 levels)</label>
                <div class="chip-row" data-chip-group="demo_mode" data-chip-type="single">
                  <input class="chip-input" type="radio" name="demo_mode" id="demo_off" value="0-off" />
                  <label class="chip" for="demo_off">0 — Off (collect only)</label>

                  <input class="chip-input" type="radio" name="demo_mode" id="demo_self" value="1-self-test" />
                  <label class="chip" for="demo_self">1 — Self-test only</label>

                  <input class="chip-input" type="radio" name="demo_mode" id="demo_real" value="2-real-no-book" />
                  <label class="chip" for="demo_real">2 — Real chats, no booking</label>

                  <input class="chip-input" type="radio" name="demo_mode" id="demo_book" value="3-real-with-booking" />
                  <label class="chip" for="demo_book">3 — Real chats with booking</label>

                  <input class="chip-input" type="radio" name="demo_mode" id="demo_live" value="4-full-live" />
                  <label class="chip" for="demo_live">4 — Full live mode</label>
                </div>
                <small>
                  Level 1 is perfect for an evening of testing from your partner’s phone to your own WhatsApp,
                  including making pretend bookings into your diary.
                </small>
              </div>

              <div class="field-group">
                <label>What can the AI do in demo?</label>
                <div class="chip-row" data-chip-group="demo_capabilities" data-chip-type="multi">
                  <input class="chip-input" type="checkbox" id="demo_quotes" value="Send rough quotes" />
                  <label class="chip chip-muted" for="demo_quotes">Send rough quotes</label>

                  <input class="chip-input" type="checkbox" id="demo_placeholders" value="Create placeholder bookings" />
                  <label class="chip chip-muted" for="demo_placeholders">Create placeholder bookings</label>

                  <input class="chip-input" type="checkbox" id="demo_real_calendar" value="Book into real calendar" />
                  <label class="chip chip-muted" for="demo_real_calendar">Book into real calendar</label>

                  <input class="chip-input" type="checkbox" id="demo_reviews" value="Send review link" />
                  <label class="chip chip-muted" for="demo_reviews">Send review link</label>
                </div>
              </div>

              <!-- INTERNAL ONLY -->
              <div class="internal-box">
                <div class="internal-label">TradeBotPro internal</div>
                <div class="internal-note">
                  These fields are for the TradeBotPro team. A client version of the dashboard will hide these.
                </div>

                <div class="wizard-grid-2">
                  <div class="field-group">
                    <label for="profile_status">Profile status (internal)</label>
                    <select id="profile_status" name="profile_status">
                      <option value="draft">Draft — still setting up</option>
                      <option value="demo">Demo only</option>
                      <option value="ready">Ready to go live</option>
                      <option value="live">Live with real customers</option>
                      <option value="paused">Paused</option>
                    </select>
                  </div>

                  <div class="field-group">
                    <label for="setup_notes">Internal setup notes</label>
                    <textarea id="setup_notes" name="setup_notes"
                      placeholder="Example: Wants focus on OX postcodes only. No oil. Follow Move Motorcycles style of follow-up…"></textarea>
                  </div>
                </div>
              </div>

              <!-- CALENDAR PREVIEW -->
              <div class="field-group" style="margin-top:1.1rem;">
                <label>Your TradeBotPro calendar (preview)</label>
                <small>
                  This is where we’ll show jobs TradeBotPro has booked.
                  Later we’ll sync this with Google / Outlook so you can’t live without it.
                </small>

                <div class="calendar-preview">
                  <div class="calendar-header">
                    <span>Week view (sample)</span>
                    <span style="font-size:0.78rem;opacity:0.75;">
                      Connected calendar: <strong>Not linked yet</strong>
                    </span>
                  </div>
                  <div class="calendar-grid">
                    <div class="calendar-day">Mon</div>
                    <div class="calendar-day">Tue</div>
                    <div class="calendar-day">Wed</div>
                    <div class="calendar-day">Thu</div>
                    <div class="calendar-day">Fri</div>
                    <div class="calendar-day">Sat</div>
                    <div class="calendar-day">Sun</div>

                    <!-- Row 1 -->
                    <div class="calendar-cell">
                      <span class="calendar-job">09:00 Boiler leak – OX2</span>
                    </div>
                    <div class="calendar-cell">
                      <span class="calendar-job">10:30 Quote – bathroom</span>
                    </div>
                    <div class="calendar-cell">
                      <span class="calendar-job">AM Service – OX5</span>
                    </div>
                    <div class="calendar-cell"></div>
                    <div class="calendar-cell">
                      <span class="calendar-job">PM Landlord cert – OX3</span>
                    </div>
                    <div class="calendar-cell"></div>
                    <div class="calendar-cell"></div>

                    <!-- Row 2 -->
                    <div class="calendar-cell"></div>
                    <div class="calendar-cell"></div>
                    <div class="calendar-cell">
                      <span class="calendar-job">Eve emergency slot</span>
                    </div>
                    <div class="calendar-cell"></div>
                    <div class="calendar-cell"></div>
                    <div class="calendar-cell"></div>
                    <div class="calendar-cell"></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- NAV + STATUS -->
            <div class="wizard-nav">
              <div class="wizard-nav-left" id="wizard-progress-text">
                Step 1 of 4
              </div>
              <div class="wizard-nav-buttons">
                <button type="button" class="btn-secondary" id="btn-prev" disabled>
                  ← Back
                </button>
                <button type="button" class="btn-primary" id="btn-next">
                  Next step →
                </button>
                <button type="submit" class="btn-primary" id="btn-finish" style="display:none;">
                  Save setup (front-end only)
                </button>
              </div>
            </div>

            <div id="wizard-status" aria-live="polite"></div>
          </form>
        </section>
      </div>
    </div>
  </main>
</div>

<script>
  // --- BASIC STATE ---
  const totalSteps = 4;
  let currentStep = 1;

  const stepElems = document.querySelectorAll(".wizard-step");
  const stepItems = document.querySelectorAll(".wizard-step-item");
  const progressText = document.getElementById("wizard-progress-text");
  const statusEl = document.getElementById("wizard-status");
  const btnPrev = document.getElementById("btn-prev");
  const btnNext = document.getElementById("btn-next");
  const btnFinish = document.getElementById("btn-finish");

  function setStatus(message, type) {
    statusEl.textContent = message || "";
    statusEl.classList.remove("status-error", "status-success");
    if (type === "error") statusEl.classList.add("status-error");
    if (type === "success") statusEl.classList.add("status-success");
  }

  function showStep(step) {
    currentStep = step;

    // Show/hide step panels
    stepElems.forEach(el => {
      const s = Number(el.getAttribute("data-step"));
      el.hidden = (s !== step);
    });

    // Update sidebar badges
    stepItems.forEach(item => {
      const s = Number(item.getAttribute("data-step"));
      item.classList.remove("active", "completed");
      if (s < step) {
        item.classList.add("completed");
      } else if (s === step) {
        item.classList.add("active");
      }
    });

    // Update buttons
    btnPrev.disabled = (step === 1);
    btnNext.style.display = (step === totalSteps) ? "none" : "inline-flex";
    btnFinish.style.display = (step === totalSteps) ? "inline-flex" : "none";

    progressText.textContent = `Step ${step} of ${totalSteps}`;
    setStatus("", null);
  }

  btnPrev.addEventListener("click", () => {
    if (currentStep > 1) {
      showStep(currentStep - 1);
    }
  });

  btnNext.addEventListener("click", () => {
    // Simple per-step validation: require some key fields before moving on
    const form = document.getElementById("setup-form");

    if (currentStep === 1) {
      const requiredIds = ["business_name", "contact_name", "email", "whatsapp_number"];
      for (const id of requiredIds) {
        const el = document.getElementById(id);
        if (!el || !el.value.trim()) {
          el && el.focus();
          setStatus("Please fill in your basic business details before continuing.", "error");
          return;
        }
      }
    }

    if (currentStep === 2) {
      const basePostcode = document.getElementById("base_postcode");
      if (!basePostcode || !basePostcode.value.trim()) {
        basePostcode && basePostcode.focus();
        setStatus("Please confirm your base postcode before continuing.", "error");
        return;
      }
    }

    if (currentStep === 3) {
      // No hard validation, just allow moving on
    }

    if (currentStep < totalSteps) {
      showStep(currentStep + 1);
    }
  });

  // --- CHIP HANDLING (single + multi) ---
  function initChips() {
    const chipRows = document.querySelectorAll(".chip-row");
    chipRows.forEach(row => {
      const type = row.getAttribute("data-chip-type") || "multi";
      const inputs = row.querySelectorAll(".chip-input");
      const labels = row.querySelectorAll(".chip");

      // Clear selection helper
      function clearAll() {
        labels.forEach(label => label.classList.remove("chip-selected"));
      }

      inputs.forEach(input => {
        const label = row.querySelector(`label[for="${input.id}"]`);
        if (!label) return;

        label.addEventListener("click", () => {
          if (type === "single") {
            // Radio-like
            clearAll();
            label.classList.add("chip-selected");
            input.checked = true;
          } else {
            // Multi toggle
            const selected = label.classList.toggle("chip-selected");
            input.checked = selected;
          }
        });
      });
    });
  }

  initChips();

  // --- FORM SUBMIT (FRONT-END ONLY PLACEHOLDER) ---
  const setupForm = document.getElementById("setup-form");
  setupForm.addEventListener("submit", (event) => {
    event.preventDefault();

    // Simple front-end "save" simulation.
    // Later we will POST this to Supabase (tradebotpro_signups + business_profiles).
    btnFinish.disabled = true;
    setStatus("Saving your setup (front-end only demo)…", null);

    setTimeout(() => {
      setStatus("Profile settings saved on this page. Supabase wiring will be added later.", "success");
      btnFinish.disabled = false;
    }, 500);
  });

  // --- READ user_id FROM URL (display only for now) ---
  (function showUserIdFromUrl() {
    const params = new URLSearchParams(window.location.search);
    const id = params.get("user_id");
    const pill = document.getElementById("user-id-pill");
    if (id) {
      pill.textContent = `User ID: ${id}`;
    } else {
      pill.textContent = "No user_id in URL";
    }
  })();

  // Start at step 1
  showStep(1);
</script>
</body>
</html>
