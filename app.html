<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TradeBotPro — Setup wizard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="TradeBotPro client setup wizard. Tell us about your business so your AI assistant feels like part of your team."
  />
  <style>
    :root {
      --primary-blue: #1f4e79;
      --accent-blue: #00a3ff;
      --dark-text: #1b1b1f;
      --light-bg: #f5f7fa;
      --white: #ffffff;
      --border-subtle: rgba(0,0,0,0.08);
      --muted-text: rgba(0,0,0,0.65);
      --error-red: #b3261e;
      --success-green: #0f7b46;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background: var(--light-bg);
      color: var(--dark-text);
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: var(--white);
      border-bottom: 1px solid var(--border-subtle);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .inner {
      max-width: 1120px;
      margin: 0 auto;
      padding: 0 1.25rem;
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      padding: 0.75rem 0;
    }

    .logo-wrap {
      display: flex;
      align-items: center;
      gap: 0.6rem;
    }

    .logo-icon {
      width: 32px;
      height: 32px;
      border-radius: 9px;
      background: var(--primary-blue);
      position: relative;
    }

    .logo-icon::before,
    .logo-icon::after {
      content: "";
      position: absolute;
      background: var(--white);
      border-radius: 4px;
    }

    .logo-icon::before {
      width: 12px;
      height: 18px;
      left: 7px;
      top: 7px;
    }

    .logo-icon::after {
      width: 6px;
      height: 12px;
      right: 7px;
      top: 10px;
    }

    .logo-main {
      font-weight: 700;
      font-size: 1.05rem;
      color: var(--primary-blue);
    }

    .logo-tag {
      font-size: 0.7rem;
      opacity: 0.7;
    }

    .nav-right {
      font-size: 0.85rem;
      color: var(--muted-text);
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 0.2rem;
    }

    .pill-small {
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      background: #e4eef8;
      font-size: 0.75rem;
      color: var(--primary-blue);
    }

    main {
      flex: 1;
      padding: 1.5rem 0 2.5rem;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) minmax(0, 1fr);
      gap: 1.8rem;
    }

    @media (max-width: 900px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }

      .nav-right {
        align-items: flex-start;
      }
    }

    .wizard-card {
      background: var(--white);
      border-radius: 1.1rem;
      padding: 1.3rem 1.4rem 1.5rem;
      box-shadow: 0 14px 30px rgba(0,0,0,0.06);
    }

    .side-card {
      background: var(--white);
      border-radius: 1.1rem;
      padding: 1.1rem 1.2rem 1.3rem;
      box-shadow: 0 10px 24px rgba(0,0,0,0.04);
      font-size: 0.9rem;
    }

    /* Stepper */
    .wizard-header {
      margin-bottom: 1rem;
    }

    .wizard-title {
      margin: 0 0 0.2rem;
      font-size: 1.4rem;
      color: var(--primary-blue);
    }

    .wizard-subtitle {
      margin: 0;
      font-size: 0.88rem;
      color: var(--muted-text);
    }

    .stepper {
      margin-top: 0.9rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .stepper-track {
      flex: 1;
      height: 4px;
      border-radius: 999px;
      background: #e0e6f0;
      overflow: hidden;
    }

    .stepper-progress {
      height: 100%;
      width: 0;
      background: var(--primary-blue);
      transition: width 0.25s ease;
    }

    .stepper-stages {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      font-size: 0.78rem;
    }

    .stepper-stage {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      background: #eef1f8;
      color: var(--muted-text);
    }

    .stepper-stage-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: #c4ccdd;
    }

    .stepper-stage--active {
      background: #e4eef8;
      color: var(--primary-blue);
      font-weight: 600;
    }

    .stepper-stage--active .stepper-stage-dot {
      background: var(--primary-blue);
    }

    .stepper-stage--done .stepper-stage-dot {
      background: var(--success-green);
    }

    /* Steps */
    .step {
      display: none;
      margin-top: 0.5rem;
    }

    .step--active {
      display: block;
    }

    .step h2 {
      margin: 0 0 0.3rem;
      font-size: 1.2rem;
      color: var(--primary-blue);
    }

    .step-lead {
      margin: 0 0 1rem;
      font-size: 0.9rem;
      color: var(--muted-text);
    }

    .grid-2 {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 0.9rem 1rem;
    }

    .field {
      margin-bottom: 0.85rem;
    }

    .field label {
      display: block;
      font-size: 0.8rem;
      margin-bottom: 0.25rem;
      font-weight: 500;
    }

    .field small {
      display: block;
      font-size: 0.75rem;
      color: var(--muted-text);
      margin-top: 0.15rem;
    }

    .field input,
    .field select,
    .field textarea {
      width: 100%;
      padding: 0.55rem 0.65rem;
      border-radius: 0.5rem;
      border: 1px solid rgba(0,0,0,0.16);
      font: inherit;
      font-size: 0.9rem;
      background: #fcfdff;
    }

    .field textarea {
      min-height: 80px;
      resize: vertical;
    }

    .field input:focus,
    .field select:focus,
    .field textarea:focus {
      outline: 2px solid rgba(31, 78, 121, 0.4);
      border-color: transparent;
    }

    .chips-label-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 0.5rem;
    }

    .chips-label-row span {
      font-size: 0.75rem;
      color: var(--muted-text);
    }

    .chip-group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.25rem;
    }

    .chip {
      border-radius: 999px;
      padding: 0.35rem 0.75rem;
      font-size: 0.8rem;
      border: 1px solid rgba(0,0,0,0.14);
      background: #f8fafc;
      cursor: pointer;
      user-select: none;
      white-space: nowrap;
    }

    .chip--selected {
      background: #e4eef8;
      border-color: var(--primary-blue);
      color: var(--primary-blue);
      font-weight: 600;
    }

    .badge-muted {
      display: inline-flex;
      align-items: center;
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      font-size: 0.75rem;
      background: #f1f3f8;
      color: var(--muted-text);
      gap: 0.25rem;
    }

    .badge-muted span {
      font-size: 0.75rem;
    }

    .badge-muted strong {
      font-size: 0.78rem;
    }

    .internal-note {
      font-size: 0.78rem;
      color: var(--muted-text);
      font-style: italic;
      margin-top: 0.25rem;
    }

    .field--inline {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.75rem;
    }

    .field--inline .field-label-block {
      flex: 1;
    }

    .field--inline .badge-muted {
      flex-shrink: 0;
    }

    .field input[readonly] {
      background: #f5f7fb;
      cursor: not-allowed;
    }

    .demo-status-note {
      margin-top: 0.4rem;
      font-size: 0.78rem;
      color: var(--muted-text);
    }

    .calendar-placeholder {
      margin-top: 0.6rem;
      border-radius: 0.7rem;
      border: 1px dashed rgba(0,0,0,0.16);
      padding: 0.7rem 0.8rem;
      font-size: 0.8rem;
      background: #f7f8ff;
    }

    /* Navigation buttons */
    .wizard-footer {
      margin-top: 1.1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .wizard-footer-left {
      font-size: 0.8rem;
      color: var(--muted-text);
    }

    .wizard-footer-right {
      display: flex;
      gap: 0.55rem;
      flex-wrap: wrap;
    }

    .btn {
      border-radius: 999px;
      padding: 0.6rem 1.1rem;
      border: none;
      font-size: 0.86rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.3rem;
    }

    .btn-primary {
      background: var(--primary-blue);
      color: var(--white);
      font-weight: 600;
    }

    .btn-primary:hover {
      background: #163857;
    }

    .btn-outline {
      background: var(--white);
      color: var(--primary-blue);
      border: 1px solid rgba(0,0,0,0.16);
    }

    .btn-ghost {
      background: transparent;
      color: var(--muted-text);
      border: none;
    }

    .btn[disabled] {
      opacity: 0.6;
      cursor: default;
    }

    .btn-icon-left {
      font-size: 1rem;
      line-height: 0;
    }

    /* Status text */
    .wizard-status {
      margin-top: 0.8rem;
      font-size: 0.82rem;
    }

    .wizard-status--success {
      color: var(--success-green);
    }

    .wizard-status--error {
      color: var(--error-red);
    }

    /* Side card content */
    .side-heading {
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 0.45rem;
      color: var(--primary-blue);
    }

    .side-sub {
      font-size: 0.8rem;
      color: var(--muted-text);
      margin-bottom: 0.7rem;
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      gap: 0.5rem;
      font-size: 0.8rem;
      margin-bottom: 0.2rem;
    }

    .summary-label {
      color: var(--muted-text);
    }

    .summary-value {
      font-weight: 500;
      text-align: right;
    }

    .quote-box {
      margin-top: 0.75rem;
      padding: 0.8rem 0.9rem;
      border-radius: 0.7rem;
      border-left: 3px solid var(--primary-blue);
      background: #f7f9ff;
      font-size: 0.82rem;
      font-style: italic;
    }

    .tiny-note {
      margin-top: 0.5rem;
      font-size: 0.75rem;
      color: var(--muted-text);
    }

    footer {
      border-top: 1px solid var(--border-subtle);
      background: var(--white);
      font-size: 0.78rem;
    }

    .footer-inner {
      padding: 0.9rem 1.25rem 1.1rem;
      display: flex;
      justify-content: space-between;
      gap: 0.75rem;
      flex-wrap: wrap;
      color: var(--muted-text);
    }
  </style>
</head>
<body>
<div class="page">
  <header>
    <div class="inner">
      <div class="nav">
        <div class="logo-wrap">
          <div class="logo-icon" aria-hidden="true"></div>
          <div>
            <div class="logo-main">TradeBotPro</div>
            <div class="logo-tag">Client setup wizard</div>
          </div>
        </div>
        <div class="nav-right">
          <div class="pill-small">Step <span id="step-counter">1</span> of 4</div>
          <div>We’ll use this info so your AI assistant feels like a real member of your team.</div>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="inner">
      <div class="layout">
        <!-- WIZARD CARD -->
        <div class="wizard-card">
          <div class="wizard-header">
            <h1 class="wizard-title" id="wizard-heading">Step 1 — Your business basics</h1>
            <p class="wizard-subtitle" id="wizard-subtitle">
              Tell us who you are, what you do and where you work.
            </p>

            <div class="stepper">
              <div class="stepper-track" aria-hidden="true">
                <div class="stepper-progress" id="stepper-progress"></div>
              </div>
              <div class="stepper-stages">
                <div class="stepper-stage stepper-stage--active" data-step-label="1">
                  <div class="stepper-stage-dot"></div>
                  <span>Business</span>
                </div>
                <div class="stepper-stage" data-step-label="2">
                  <div class="stepper-stage-dot"></div>
                  <span>Enquiries</span>
                </div>
                <div class="stepper-stage" data-step-label="3">
                  <div class="stepper-stage-dot"></div>
                  <span>Pricing &amp; hours</span>
                </div>
                <div class="stepper-stage" data-step-label="4">
                  <div class="stepper-stage-dot"></div>
                  <span>Demo &amp; go-live</span>
                </div>
              </div>
            </div>
          </div>

          <!-- STEP 1 -->
          <section class="step step--active" data-step="1">
            <h2>Your business basics</h2>
            <p class="step-lead">
              We’ll start with the essentials so TradeBotPro can introduce you properly and check if a job is in your area.
            </p>

            <div class="grid-2">
              <div class="field">
                <label for="business_name">Business name</label>
                <input id="business_name" type="text" placeholder="e.g. ClearFlow Plumbing & Heating">
              </div>

              <div class="field">
                <div class="chips-label-row">
                  <label>What trade are you?</label>
                  <span>(pick one that fits best)</span>
                </div>
                <div
                  class="chip-group"
                  data-target-input="trade_type"
                  data-multi="false"
                  aria-label="Select your main trade"
                >
                  <!-- Keep in sync with Supabase trades list -->
                  <button type="button" class="chip" data-value="Plumber">Plumber</button>
                  <button type="button" class="chip" data-value="Heating engineer">Heating engineer</button>
                  <button type="button" class="chip" data-value="Gas engineer">Gas engineer</button>
                  <button type="button" class="chip" data-value="Plumbing & heating">Plumbing &amp; heating</button>
                  <button type="button" class="chip" data-value="Electrician">Electrician</button>
                  <button type="button" class="chip" data-value="Roofer">Roofer</button>
                  <button type="button" class="chip" data-value="Builder">Builder</button>
                  <button type="button" class="chip" data-value="Handyman">Handyman</button>
                  <button type="button" class="chip" data-value="Carpenter / joiner">Carpenter / joiner</button>
                  <button type="button" class="chip" data-value="Landscaper / gardener">Landscaper / gardener</button>
                  <button type="button" class="chip" data-value="Cleaner">Cleaner</button>
                  <button type="button" class="chip" data-value="Carpet cleaner">Carpet cleaner</button>
                  <button type="button" class="chip" data-value="Window cleaner">Window cleaner</button>
                  <button type="button" class="chip" data-value="Pest control">Pest control</button>
                  <button type="button" class="chip" data-value="Locksmith">Locksmith</button>
                  <button type="button" class="chip" data-value="Appliance repair">Appliance repair</button>
                  <button type="button" class="chip" data-value="Painter & decorator">Painter &amp; decorator</button>
                  <button type="button" class="chip" data-value="Other trade">Other</button>
                </div>
                <input id="trade_type" type="hidden">
                <small>You can refine job types later — this just helps us get the wording right.</small>
              </div>

              <div class="field">
                <label for="service_postcodes">Main service area (postcodes)</label>
                <input
                  id="service_postcodes"
                  type="text"
                  placeholder="e.g. OX2, OX3, OX4 or MK4, MK5"
                >
                <small>
                  Please use postcodes rather than town names. TradeBotPro will check if a job is inside this area.
                </small>
              </div>

              <div class="field">
                <label for="typical_jobs">Typical jobs you want more of</label>
                <textarea
                  id="typical_jobs"
                  placeholder="e.g. boiler breakdowns, boiler services, leaking toilets, tap changes, landlord gas safety checks"
                ></textarea>
                <small>This helps us steer enquiries towards the work you actually want to do.</small>
              </div>
            </div>

            <div class="grid-2">
              <div class="field">
                <label for="staff_count">How many people work in the business?</label>
                <select id="staff_count">
                  <option value="">Select…</option>
                  <option value="Solo">Just me</option>
                  <option value="2-3">2–3</option>
                  <option value="4-6">4–6</option>
                  <option value="7-10">7–10</option>
                  <option value="10+">More than 10</option>
                </select>
              </div>

              <div class="field">
                <label for="business_website">Website (if you have one)</label>
                <input id="business_website" type="url" placeholder="e.g. https://www.clearflowplumbing.co.uk">
              </div>
            </div>
          </section>

          <!-- STEP 2 -->
          <section class="step" data-step="2">
            <h2>How enquiries reach you</h2>
            <p class="step-lead">
              We’ll plug TradeBotPro into the channels you already use so new jobs never slip through the net.
            </p>

            <div class="grid-2">
              <div class="field">
                <label for="main_whatsapp">Main mobile / WhatsApp number</label>
                <input id="main_whatsapp" type="tel" placeholder="e.g. 07…">
                <small>This is usually the number customers already use to contact you.</small>
              </div>

              <div class="field">
                <label for="backup_phone">Backup phone (optional)</label>
                <input id="backup_phone" type="tel" placeholder="e.g. partner, office or on-call number">
                <small>We’ll only use this if we need to reach you urgently about a live job.</small>
              </div>
            </div>

            <div class="field">
              <div class="chips-label-row">
                <label>Where do enquiries currently come from?</label>
                <span>(tick all that apply)</span>
              </div>
              <div
                class="chip-group"
                data-target-input="enquiry_channels"
                data-multi="true"
                aria-label="Select enquiry channels"
              >
                <button type="button" class="chip" data-value="WhatsApp">WhatsApp</button>
                <button type="button" class="chip" data-value="Phone calls">Phone calls</button>
                <button type="button" class="chip" data-value="Website contact form">Website contact form</button>
                <button type="button" class="chip" data-value="Facebook messages">Facebook messages</button>
                <button type="button" class="chip" data-value="Instagram messages">Instagram messages</button>
                <button type="button" class="chip" data-value="Google Business messages">Google Business messages</button>
                <button type="button" class="chip" data-value="Other">Other</button>
              </div>
              <input id="enquiry_channels" type="hidden">
            </div>

            <div class="field">
              <div class="chips-label-row">
                <label>What review platform do you use or want to use?</label>
                <span>(we’ll nudge customers to leave reviews here)</span>
              </div>
              <div
                class="chip-group"
                data-target-input="review_platforms"
                data-multi="true"
                aria-label="Select review platforms"
              >
                <button type="button" class="chip" data-value="Google reviews">Google reviews</button>
                <button type="button" class="chip" data-value="Trustpilot">Trustpilot</button>
                <button type="button" class="chip" data-value="Checkatrade">Checkatrade</button>
                <button type="button" class="chip" data-value="MyBuilder">MyBuilder</button>
                <button type="button" class="chip" data-value="Rated People">Rated People</button>
                <button type="button" class="chip" data-value="Facebook reviews">Facebook reviews</button>
                <button type="button" class="chip" data-value="Other / not sure yet">Other / not sure yet</button>
              </div>
              <input id="review_platforms" type="hidden">
              <small>You can change these later — we just need to know where to direct happy customers.</small>
            </div>

            <div class="field">
              <label for="review_link">Review link (if you have one)</label>
              <input
                id="review_link"
                type="url"
                placeholder="Paste your Google / Trustpilot / Checkatrade review link here"
              >
            </div>
          </section>

          <!-- STEP 3 -->
          <section class="step" data-step="3">
            <h2>Pricing & working hours</h2>
            <p class="step-lead">
              This lets TradeBotPro give sensible rough prices and offer appointment slots that work for you.
            </p>

            <div class="grid-2">
              <div class="field">
                <label for="callout_fee">Typical call-out fee (if you charge one)</label>
                <input id="callout_fee" type="text" placeholder="e.g. £90 fixed, or ‘no call-out fee’">
                <small>We won’t promise exact prices — just a realistic ballpark to set expectations.</small>
              </div>

              <div class="field">
                <label for="hourly_rate">Typical hourly rate after first hour</label>
                <input id="hourly_rate" type="text" placeholder="e.g. £60 per hour">
              </div>
            </div>

            <div class="field">
              <div class="chips-label-row">
                <label>When do you normally work?</label>
                <span>(we’ll base suggested time slots on this)</span>
              </div>
              <div
                class="chip-group"
                data-target-input="working_hours"
                data-multi="true"
                aria-label="Select working hours"
              >
                <button type="button" class="chip" data-value="Weekdays — daytime (e.g. 8–5)">
                  Weekdays — daytime
                </button>
                <button type="button" class="chip" data-value="Weekdays — evenings">
                  Weekdays — evenings
                </button>
                <button type="button" class="chip" data-value="Saturdays">
                  Saturdays
                </button>
                <button type="button" class="chip" data-value="Sundays / bank holidays">
                  Sundays / bank holidays
                </button>
                <button type="button" class="chip" data-value="24/7 emergency for certain jobs">
                  24/7 emergency (for certain jobs)
                </button>
              </div>
              <input id="working_hours" type="hidden">
            </div>

            <div class="field">
              <label for="service_radius">How far are you happy to travel?</label>
              <input id="service_radius" type="text" placeholder="e.g. up to 30 minutes from OX2 or 15 miles">
              <small>We’ll combine this with your postcodes so we don’t book you on awkward journeys.</small>
            </div>

            <div class="field">
              <label for="pricing_notes">Anything else we should know about your prices?</label>
              <textarea
                id="pricing_notes"
                placeholder="e.g. different rates for out-of-hours, fixed prices for boiler services, discounts for OAPs, etc."
              ></textarea>
            </div>

            <div class="field">
              <label>Calendar & bookings</label>
              <div class="calendar-placeholder">
                Your TradeBotPro dashboard will include a calendar so you can see jobs at a glance.
                We’ll connect this to your existing diary (Google / Outlook / iPhone) during onboarding,
                so once you’re using it you’ll probably wish you had signed up years ago.
              </div>
            </div>
          </section>

          <!-- STEP 4 -->
          <section class="step" data-step="4">
            <h2>Demo & go-live</h2>
            <p class="step-lead">
              Last bit. We’ll agree how your demo works and how we know you’re ready to switch TradeBotPro on for real customers.
            </p>

            <div class="grid-2">
              <div class="field">
                <div class="chips-label-row">
                  <label>How would you like to test your demo?</label>
                  <span>(so you can build confidence first)</span>
                </div>
                <div
                  class="chip-group"
                  data-target-input="demo_preferences"
                  data-multi="true"
                  aria-label="Select demo preferences"
                >
                  <button type="button" class="chip" data-value="Test from my own mobile">
                    Test from my own mobile
                  </button>
                  <button type="button" class="chip" data-value="Partner or family testing with me">
                    Partner or family testing with me
                  </button>
                  <button type="button" class="chip" data-value="Friends or staff trying real questions">
                    Friends / staff asking real questions
                  </button>
                  <button type="button" class="chip" data-value="Test making real bookings into my diary">
                    Test making real bookings
                  </button>
                  <button type="button" class="chip" data-value="Guided demo on Zoom / Teams">
                    Guided demo call
                  </button>
                </div>
                <input id="demo_preferences" type="hidden">
                <div class="demo-status-note">
                  A typical evening of testing from your partner’s phone to yours is enough for most people to feel comfortable.
                </div>
              </div>

              <div class="field">
                <div class="chips-label-row">
                  <label>Demo status</label>
                  <span>(internal steps we track with you)</span>
                </div>
                <div
                  class="chip-group"
                  data-target-input="demo_status"
                  data-multi="false"
                  aria-label="Select demo status"
                >
                  <button type="button" class="chip" data-value="1. Not started yet">
                    1. Not started yet
                  </button>
                  <button type="button" class="chip" data-value="2. Playing with messages">
                    2. Playing with messages
                  </button>
                  <button type="button" class="chip" data-value="3. Happy with answers">
                    3. Happy with answers
                  </button>
                  <button type="button" class="chip" data-value="4. Tested bookings into diary">
                    4. Tested bookings into diary
                  </button>
                  <button type="button" class="chip" data-value="5. Ready to go live">
                    5. Ready to go live
                  </button>
                </div>
                <input id="demo_status" type="hidden">
                <small>
                  We’ll update these together during onboarding so everyone knows where you’re up to.
                </small>
              </div>
            </div>

            <div class="grid-2">
              <div class="field field--inline">
                <div class="field-label-block">
                  <label for="profile_active">Profile active / ready to go live</label>
                  <div class="internal-note">
                    Managed by TradeBotPro. We’ll switch this on once you’re happy with the demo.
                  </div>
                </div>
                <div class="badge-muted">
                  <strong id="profile_active_label">Not live yet</strong>
                </div>
                <input id="profile_active" type="hidden" value="false">
              </div>

              <div class="field field--inline">
                <div class="field-label-block">
                  <label for="setup_status">Setup status (internal)</label>
                  <div class="internal-note">
                    This is for the TradeBotPro team — we’ll manage it in the background.
                  </div>
                </div>
                <div class="badge-muted">
                  <span>Current:</span> <strong id="setup_status_label">Collecting details</strong>
                </div>
                <input id="setup_status" type="hidden" value="Collecting details">
              </div>
            </div>

            <div class="field">
              <label for="anything_else">Anything else we should know?</label>
              <textarea
                id="anything_else"
                placeholder="e.g. special promises you make customers, jobs you definitely don’t want, dates you’re away, etc."
              ></textarea>
            </div>
          </section>

          <div class="wizard-footer">
            <div class="wizard-footer-left">
              You can come back and tweak this later — we’ll go through it together before anything goes live.
            </div>
            <div class="wizard-footer-right">
              <button type="button" class="btn btn-ghost" id="btn-save-draft">
                Save for later (local)
              </button>
              <button type="button" class="btn btn-outline" id="btn-prev">
                <span class="btn-icon-left">←</span>
                Previous
              </button>
              <button type="button" class="btn btn-primary" id="btn-next">
                Next step
              </button>
            </div>
          </div>

          <div id="wizard-status" class="wizard-status" aria-live="polite"></div>
        </div>

        <!-- SIDE CARD / SUMMARY -->
        <aside class="side-card">
          <div class="side-heading">Live profile preview</div>
          <div class="side-sub">
            This is roughly how your business will look inside TradeBotPro while we set you up.
          </div>

          <div class="summary-row">
            <div class="summary-label">Business</div>
            <div class="summary-value" id="summary_business">Not set yet</div>
          </div>
          <div class="summary-row">
            <div class="summary-label">Trade</div>
            <div class="summary-value" id="summary_trade">Please choose a trade</div>
          </div>
          <div class="summary-row">
            <div class="summary-label">Area</div>
            <div class="summary-value" id="summary_area">Add postcodes</div>
          </div>
          <div class="summary-row">
            <div class="summary-label">Main number</div>
            <div class="summary-value" id="summary_phone">Not added yet</div>
          </div>
          <div class="summary-row">
            <div class="summary-label">Review platform</div>
            <div class="summary-value" id="summary_reviews">Not chosen</div>
          </div>
          <div class="summary-row">
            <div class="summary-label">Demo status</div>
            <div class="summary-value" id="summary_demo">Not started</div>
          </div>

          <div class="quote-box">
            “Once it’s wired into your calendar and review platform, most people say they
            <strong>wish they had signed up years ago</strong>.”
          </div>

          <div class="tiny-note">
            When we’re happy with this together, we’ll connect your Supabase profile and calendar so everything stays in sync automatically.
          </div>
        </aside>
      </div>
    </div>
  </main>

  <footer>
    <div class="inner footer-inner">
      <div>&copy; <span id="year"></span> TradeBotPro. All rights reserved.</div>
      <div>Need help? Email <a href="mailto:hello@tradebotpro.co.uk">hello@tradebotpro.co.uk</a>.</div>
    </div>
  </footer>
</div>

<script>
  // Footer year
  document.getElementById('year').textContent = new Date().getFullYear();

  // Wizard logic (front-end only, no Supabase yet)
  const TOTAL_STEPS = 4;
  let currentStep = 1;

  const stepElements = document.querySelectorAll('.step');
  const stepperProgress = document.getElementById('stepper-progress');
  const stepCounter = document.getElementById('step-counter');
  const stepperStages = document.querySelectorAll('.stepper-stage');
  const wizardHeading = document.getElementById('wizard-heading');
  const wizardSubtitle = document.getElementById('wizard-subtitle');
  const btnPrev = document.getElementById('btn-prev');
  const btnNext = document.getElementById('btn-next');
  const btnSaveDraft = document.getElementById('btn-save-draft');
  const wizardStatus = document.getElementById('wizard-status');

  const STEP_COPY = {
    1: {
      title: 'Step 1 — Your business basics',
      subtitle: 'Tell us who you are, what you do and where you work.'
    },
    2: {
      title: 'Step 2 — How enquiries reach you',
      subtitle: 'We’ll plug TradeBotPro into the channels you already use.'
    },
    3: {
      title: 'Step 3 — Pricing & working hours',
      subtitle: 'Set sensible rough prices and hours so the AI can offer slots.'
    },
    4: {
      title: 'Step 4 — Demo & go-live',
      subtitle: 'Agree how you test TradeBotPro and when we flick the switch.'
    }
  };

  function showStep(step) {
    if (step < 1 || step > TOTAL_STEPS) return;

    currentStep = step;

    stepElements.forEach(section => {
      section.classList.toggle(
        'step--active',
        Number(section.dataset.step) === currentStep
      );
    });

    // Update header text
    wizardHeading.textContent = STEP_COPY[currentStep].title;
    wizardSubtitle.textContent = STEP_COPY[currentStep].subtitle;

    // Update progress bar and counter
    const progressPercent = ((currentStep - 1) / (TOTAL_STEPS - 1)) * 100;
    stepperProgress.style.width = progressPercent + '%';
    stepCounter.textContent = String(currentStep);

    // Update stepper badges
    stepperStages.forEach(stage => {
      const labelStep = Number(stage.dataset.stepLabel);
      stage.classList.remove('stepper-stage--active', 'stepper-stage--done');

      if (labelStep < currentStep) {
        stage.classList.add('stepper-stage--done');
      } else if (labelStep === currentStep) {
        stage.classList.add('stepper-stage--active');
      }
    });

    // Buttons
    btnPrev.disabled = currentStep === 1;
    btnNext.textContent = currentStep === TOTAL_STEPS ? 'Finish setup' : 'Next step';
  }

  btnPrev.addEventListener('click', () => {
    showStep(currentStep - 1);
  });

  btnNext.addEventListener('click', () => {
    if (currentStep < TOTAL_STEPS) {
      showStep(currentStep + 1);
    } else {
      // Final step "Finish" (front-end only for now)
      wizardStatus.textContent = 'Details saved in your browser for now. We’ll connect Supabase next.';
      wizardStatus.className = 'wizard-status wizard-status--success';
      saveDraftToLocalStorage();
    }
  });

  // Simple chip logic (single + multi select)
  document.querySelectorAll('.chip-group').forEach(group => {
    const multi = group.dataset.multi === 'true';
    const targetId = group.dataset.targetInput;
    const targetInput = targetId ? document.getElementById(targetId) : null;

    group.addEventListener('click', (event) => {
      const chip = event.target.closest('.chip');
      if (!chip) return;

      if (multi) {
        chip.classList.toggle('chip--selected');
      } else {
        group.querySelectorAll('.chip').forEach(c => c.classList.remove('chip--selected'));
        chip.classList.add('chip--selected');
      }

      if (targetInput) {
        const selectedValues = Array.from(group.querySelectorAll('.chip--selected'))
          .map(c => c.dataset.value);
        targetInput.value = multi ? selectedValues.join(', ') : (selectedValues[0] || '');
        updateSummary();
      }
    });
  });

  // Summaries on the right
  const summaryBusinessEl = document.getElementById('summary_business');
  const summaryTradeEl = document.getElementById('summary_trade');
  const summaryAreaEl = document.getElementById('summary_area');
  const summaryPhoneEl = document.getElementById('summary_phone');
  const summaryReviewsEl = document.getElementById('summary_reviews');
  const summaryDemoEl = document.getElementById('summary_demo');

  function updateSummary() {
    const businessName = document.getElementById('business_name').value.trim();
    const tradeType = document.getElementById('trade_type').value.trim();
    const area = document.getElementById('service_postcodes').value.trim();
    const phone = document.getElementById('main_whatsapp').value.trim();
    const reviews = document.getElementById('review_platforms').value.trim();
    const demo = document.getElementById('demo_status').value.trim();

    summaryBusinessEl.textContent = businessName || 'Not set yet';
    summaryTradeEl.textContent = tradeType || 'Please choose a trade';
    summaryAreaEl.textContent = area || 'Add postcodes';
    summaryPhoneEl.textContent = phone || 'Not added yet';
    summaryReviewsEl.textContent = reviews || 'Not chosen';
    summaryDemoEl.textContent = demo || 'Not started';
  }

  ['business_name', 'service_postcodes', 'main_whatsapp'].forEach(id => {
    const el = document.getElementById(id);
    if (el) {
      el.addEventListener('input', updateSummary);
    }
  });

  // Local draft save / load (no backend yet)
  const DRAFT_KEY = 'tradebotpro_setup_wizard_draft_v1';

  function collectFormData() {
    return {
      business_name: document.getElementById('business_name').value,
      trade_type: document.getElementById('trade_type').value,
      service_postcodes: document.getElementById('service_postcodes').value,
      typical_jobs: document.getElementById('typical_jobs').value,
      staff_count: document.getElementById('staff_count').value,
      business_website: document.getElementById('business_website').value,
      main_whatsapp: document.getElementById('main_whatsapp').value,
      backup_phone: document.getElementById('backup_phone').value,
      enquiry_channels: document.getElementById('enquiry_channels').value,
      review_platforms: document.getElementById('review_platforms').value,
      review_link: document.getElementById('review_link').value,
      callout_fee: document.getElementById('callout_fee').value,
      hourly_rate: document.getElementById('hourly_rate').value,
      working_hours: document.getElementById('working_hours').value,
      service_radius: document.getElementById('service_radius').value,
      pricing_notes: document.getElementById('pricing_notes').value,
      demo_preferences: document.getElementById('demo_preferences').value,
      demo_status: document.getElementById('demo_status').value,
      profile_active: document.getElementById('profile_active').value,
      setup_status: document.getElementById('setup_status').value,
      anything_else: document.getElementById('anything_else').value
    };
  }

  function applyFormData(data) {
    if (!data) return;
    const map = {
      business_name: 'business_name',
      trade_type: 'trade_type',
      service_postcodes: 'service_postcodes',
      typical_jobs: 'typical_jobs',
      staff_count: 'staff_count',
      business_website: 'business_website',
      main_whatsapp: 'main_whatsapp',
      backup_phone: 'backup_phone',
      enquiry_channels: 'enquiry_channels',
      review_platforms: 'review_platforms',
      review_link: 'review_link',
      callout_fee: 'callout_fee',
      hourly_rate: 'hourly_rate',
      working_hours: 'working_hours',
      service_radius: 'service_radius',
      pricing_notes: 'pricing_notes',
      demo_preferences: 'demo_preferences',
      demo_status: 'demo_status',
      profile_active: 'profile_active',
      setup_status: 'setup_status',
      anything_else: 'anything_else'
    };

    Object.keys(map).forEach(key => {
      const el = document.getElementById(map[key]);
      if (el && key in data) {
        el.value = data[key] || '';
      }
    });

    // Rebuild chips based on hidden inputs
    document.querySelectorAll('.chip-group').forEach(group => {
      const targetId = group.dataset.targetInput;
      if (!targetId) return;
      const hidden = document.getElementById(targetId);
      const multi = group.dataset.multi === 'true';
      const selectedValues = (hidden.value || '').split(',').map(v => v.trim()).filter(Boolean);

      group.querySelectorAll('.chip').forEach(chip => {
        const value = chip.dataset.value;
        if (multi) {
          chip.classList.toggle('chip--selected', selectedValues.includes(value));
        } else {
          chip.classList.toggle('chip--selected', selectedValues[0] === value);
        }
      });
    });

    updateSummary();
  }

  function saveDraftToLocalStorage() {
    try {
      const data = collectFormData();
      localStorage.setItem(DRAFT_KEY, JSON.stringify(data));
      wizardStatus.textContent = 'Draft saved locally in this browser.';
      wizardStatus.className = 'wizard-status wizard-status--success';
    } catch (e) {
      console.error('Failed to save draft:', e);
      wizardStatus.textContent = 'Could not save draft locally.';
      wizardStatus.className = 'wizard-status wizard-status--error';
    }
  }

  function loadDraftFromLocalStorage() {
    try {
      const raw = localStorage.getItem(DRAFT_KEY);
      if (!raw) return;
      const data = JSON.parse(raw);
      applyFormData(data);
      wizardStatus.textContent = 'We’ve loaded your last draft from this browser.';
      wizardStatus.className = 'wizard-status wizard-status--success';
    } catch (e) {
      console.error('Failed to load draft:', e);
    }
  }

  btnSaveDraft.addEventListener('click', () => {
    saveDraftToLocalStorage();
  });

  // Init
  showStep(1);
  loadDraftFromLocalStorage();
</script>
</body>
</html>
