<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TradeBotPro ‚Äî Setup Wizard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="TradeBotPro setup wizard ‚Äî get your AI assistant ready to book jobs, send quotes and request reviews."
  />

  <style>
    :root {
      --primary-blue: #1f4e79;
      --accent-blue: #00a3ff;
      --dark-text: #1b1b1f;
      --light-bg: #f5f7fa;
      --white: #ffffff;
      --border-subtle: rgba(0, 0, 0, 0.08);
      --error-red: #b3261e;
      --success-green: #0f7b46;
      --muted: #6b7280;
    }

    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background: var(--light-bg);
      color: var(--dark-text);
      line-height: 1.6;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* LAYOUT SHELL */

    .page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: var(--white);
      border-bottom: 1px solid var(--border-subtle);
      position: sticky;
      top: 0;
      z-index: 20;
    }

    .inner {
      max-width: 1120px;
      margin: 0 auto;
      padding: 0.75rem 1.25rem;
    }

    .header-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }

    .logo-wrap {
      display: flex;
      align-items: center;
      gap: 0.6rem;
    }

    .logo-icon {
      width: 32px;
      height: 32px;
      border-radius: 9px;
      background: var(--primary-blue);
      position: relative;
    }

    .logo-icon::before,
    .logo-icon::after {
      content: "";
      position: absolute;
      background: var(--white);
      border-radius: 4px;
    }

    .logo-icon::before {
      width: 12px;
      height: 18px;
      left: 7px;
      top: 7px;
    }

    .logo-icon::after {
      width: 6px;
      height: 12px;
      right: 7px;
      top: 10px;
    }

    .logo-main {
      font-weight: 700;
      font-size: 1.05rem;
      color: var(--primary-blue);
    }

    .logo-tag {
      font-size: 0.7rem;
      opacity: 0.7;
    }

    .header-meta {
      font-size: 0.8rem;
      text-align: right;
      color: var(--muted);
    }

    main {
      flex: 1;
    }

    .wizard-shell {
      max-width: 1120px;
      margin: 1.5rem auto 2rem;
      padding: 0 1.25rem 2rem;
    }

    /* TITLE + TAGLINE */

    .wizard-header {
      margin-bottom: 1.2rem;
    }

    .wizard-title-row {
      display: flex;
      flex-wrap: wrap;
      align-items: baseline;
      gap: 0.6rem;
      margin-bottom: 0.3rem;
    }

    .wizard-title-row h1 {
      margin: 0;
      font-size: 1.7rem;
      color: var(--primary-blue);
    }

    .wizard-title-tag {
      font-size: 0.8rem;
      padding: 0.12rem 0.6rem;
      border-radius: 999px;
      border: 1px solid rgba(31, 78, 121, 0.18);
      background: #eef3fb;
      color: var(--primary-blue);
    }

    .wizard-subtitle {
      margin: 0;
      font-size: 0.95rem;
      color: var(--muted);
    }

    .wizard-subtitle strong {
      color: var(--primary-blue);
      font-weight: 600;
    }

    /* STEP BAR (TOP) */

    .wizard-step-bar {
      margin: 1.4rem 0 1.6rem;
    }

    .wizard-step-bar-row {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .wizard-step-pill {
      flex: 1 1 0;
      min-width: 120px;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.45rem 0.75rem;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(255, 255, 255, 0.9);
      font-size: 0.8rem;
      cursor: pointer;
      transition: background 0.15s ease, border-color 0.15s ease, color 0.15s ease;
    }

    .wizard-step-pill-index {
      width: 20px;
      height: 20px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      background: #e5ecf7;
      color: var(--primary-blue);
      flex-shrink: 0;
    }

    .wizard-step-pill-label {
      font-weight: 500;
      color: #111827;
    }

    .wizard-step-pill-desc {
      display: none;
      font-size: 0.75rem;
      color: var(--muted);
    }

    .wizard-step-pill.is-active {
      background: #1f4e79;
      border-color: #1f4e79;
      color: var(--white);
    }

    .wizard-step-pill.is-active .wizard-step-pill-index {
      background: var(--white);
      color: var(--primary-blue);
    }

    .wizard-step-pill.is-active .wizard-step-pill-label {
      color: var(--white);
    }

    .wizard-step-pill.is-complete {
      border-color: #10b981;
    }

    .wizard-step-pill.is-complete .wizard-step-pill-index {
      background: #10b981;
      color: var(--white);
    }

    .wizard-step-pill.is-complete .wizard-step-pill-label {
      color: #065f46;
    }

    .wizard-step-progress {
      margin-top: 0.7rem;
      height: 4px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.35);
      overflow: hidden;
    }

    .wizard-step-progress-inner {
      height: 100%;
      width: 0;
      border-radius: inherit;
      background: linear-gradient(90deg, #1f4e79, #00a3ff);
      transition: width 0.22s ease;
    }

    /* MAIN LAYOUT */

    .wizard-layout {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.4fr);
      gap: 1.6rem;
      align-items: flex-start;
    }

    .wizard-sidebar {
      font-size: 0.85rem;
    }

    .wizard-sidebar h2 {
      margin: 0 0 0.6rem;
      font-size: 1rem;
      color: var(--primary-blue);
    }

    .wizard-sidebar p {
      margin: 0 0 0.7rem;
      color: var(--muted);
    }

    .wizard-sidebar-card {
      background: var(--white);
      border-radius: 0.85rem;
      padding: 0.85rem 0.9rem;
      border: 1px solid rgba(148, 163, 184, 0.4);
      margin-top: 0.6rem;
    }

    .wizard-sidebar-card strong {
      color: var(--primary-blue);
    }

    .wizard-sidebar-list {
      padding-left: 1.1rem;
      margin: 0.35rem 0 0;
    }

    .wizard-sidebar-list li {
      margin-bottom: 0.25rem;
    }

    /* FORM / PANEL CARD */

    .wizard-panel-card {
      background: var(--white);
      border-radius: 1rem;
      padding: 1.2rem 1.4rem 1.3rem;
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.08);
      border: 1px solid rgba(148, 163, 184, 0.35);
      font-size: 0.9rem;
    }

    .wizard-step-title {
      margin: 0 0 0.2rem;
      font-size: 1.1rem;
      color: var(--primary-blue);
    }

    .wizard-step-subtitle {
      margin: 0 0 1rem;
      font-size: 0.86rem;
      color: var(--muted);
    }

    .wizard-step-subtitle strong {
      color: var(--primary-blue);
      font-weight: 600;
    }

    /* FORM ELEMENTS */

    .field-group {
      margin-bottom: 0.9rem;
    }

    .field-row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.75rem;
    }

    .field-label-row {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 0.5rem;
      margin-bottom: 0.22rem;
    }

    label {
      font-size: 0.8rem;
      font-weight: 500;
    }

    .field-hint {
      font-size: 0.75rem;
      color: var(--muted);
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="number"],
    select,
    textarea {
      width: 100%;
      padding: 0.55rem 0.6rem;
      border-radius: 0.5rem;
      border: 1px solid rgba(148, 163, 184, 0.9);
      font: inherit;
      font-size: 0.86rem;
      background: #f9fafb;
    }

    input:focus,
    select:focus,
    textarea:focus {
      outline: 2px solid rgba(31, 78, 121, 0.45);
      border-color: transparent;
      background: #ffffff;
    }

    textarea {
      min-height: 70px;
      resize: vertical;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.2rem;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      padding: 0.32rem 0.6rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      background: #f9fafb;
      font-size: 0.78rem;
      cursor: pointer;
      user-select: none;
    }

    .chip input {
      margin: 0;
    }

    .chip.is-selected {
      background: #1f4e79;
      border-color: #1f4e79;
      color: #ffffff;
    }

    .chip.is-selected input {
      accent-color: #ffffff;
    }

    .pill-row-inline {
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
      margin-top: 0.35rem;
    }

    .pill-radio {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      padding: 0.32rem 0.6rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      font-size: 0.78rem;
      cursor: pointer;
      background: #f9fafb;
    }

    .pill-radio input {
      margin: 0;
    }

    .pill-radio.is-selected {
      background: #1f4e79;
      border-color: #1f4e79;
      color: #ffffff;
    }

    /* INTERNAL TAG */

    .badge-internal {
      font-size: 0.7rem;
      padding: 0.05rem 0.4rem;
      border-radius: 999px;
      background: #fef3c7;
      color: #92400e;
      border: 1px solid #facc15;
    }

    /* NAV BUTTONS & STATUS */

    .wizard-footer-row {
      margin-top: 1.2rem;
      padding-top: 0.8rem;
      border-top: 1px dashed rgba(148, 163, 184, 0.7);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .wizard-buttons {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    button {
      font: inherit;
    }

    .btn-primary {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.35rem;
      padding: 0.6rem 1.15rem;
      border-radius: 999px;
      border: none;
      background: var(--primary-blue);
      color: var(--white);
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
    }

    .btn-primary:hover {
      background: #163857;
    }

    .btn-secondary {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.56rem 1rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      background: #ffffff;
      font-size: 0.86rem;
      cursor: pointer;
    }

    .btn-ghost {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.45rem 0.75rem;
      border-radius: 999px;
      border: none;
      background: transparent;
      font-size: 0.8rem;
      color: var(--muted);
      cursor: pointer;
    }

    .wizard-save-status {
      font-size: 0.8rem;
    }

    .wizard-save-status--success {
      color: var(--success-green);
    }

    .wizard-save-status--error {
      color: var(--error-red);
    }

    /* STEP VISIBILITY */

    .wizard-step-panel {
      display: none;
    }

    .wizard-step-panel.is-active {
      display: block;
    }

    /* RESPONSIVE */

    @media (max-width: 900px) {
      .wizard-layout {
        grid-template-columns: minmax(0, 1fr);
      }

      .wizard-sidebar {
        order: 2;
      }

      .wizard-panel-card {
        order: 1;
      }
    }

    @media (max-width: 640px) {
      .wizard-shell {
        padding-bottom: 1.3rem;
      }

      .wizard-step-pill-desc {
        display: none;
      }
    }
  </style>
</head>
<body>
<div class="page">
  <!-- HEADER -->
  <header>
    <div class="inner">
      <div class="header-bar">
        <div class="logo-wrap">
          <div class="logo-icon" aria-hidden="true"></div>
          <div>
            <div class="logo-main">TradeBotPro</div>
            <div class="logo-tag">Setup &amp; demo wizard</div>
          </div>
        </div>
        <div class="header-meta">
          <div id="profile-label">Trade profile setup</div>
          <div id="profile-id-label"></div>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN WIZARD -->
  <main>
    <div class="wizard-shell">
      <!-- Title / Tagline -->
      <div class="wizard-header">
        <div class="wizard-title-row">
          <h1>Let‚Äôs get your AI office assistant ready</h1>
          <span class="wizard-title-tag">Takes about 5‚Äì10 minutes</span>
        </div>
        <p class="wizard-subtitle">
          Answer a few questions about your business and how you like to work.
          We‚Äôll use this to build a setup that‚Äôs so useful you‚Äôll <strong>wish you had signed up years ago</strong>.
        </p>
      </div>

      <!-- STEP BAR -->
      <div class="wizard-step-bar" aria-label="Setup progress">
        <div class="wizard-step-bar-row">
          <button type="button" class="wizard-step-pill is-active" data-step-target="1">
            <span class="wizard-step-pill-index">1</span>
            <span class="wizard-step-pill-label">Basics</span>
          </button>
          <button type="button" class="wizard-step-pill" data-step-target="2">
            <span class="wizard-step-pill-index">2</span>
            <span class="wizard-step-pill-label">Jobs &amp; pricing</span>
          </button>
          <button type="button" class="wizard-step-pill" data-step-target="3">
            <span class="wizard-step-pill-index">3</span>
            <span class="wizard-step-pill-label">Messages &amp; reviews</span>
          </button>
          <button type="button" class="wizard-step-pill" data-step-target="4">
            <span class="wizard-step-pill-index">4</span>
            <span class="wizard-step-pill-label">Demo &amp; go-live</span>
          </button>
        </div>
        <div class="wizard-step-progress" aria-hidden="true">
          <div class="wizard-step-progress-inner" id="wizard-progress-inner"></div>
        </div>
      </div>

      <div class="wizard-layout">
        <!-- SIDEBAR -->
        <aside class="wizard-sidebar">
          <h2>What happens next?</h2>
          <p>
            Once this wizard is complete we‚Äôll plug in your WhatsApp, build your
            first flows and set up your calendar links behind the scenes.
          </p>
          <div class="wizard-sidebar-card">
            <strong>During your demo evening:</strong>
            <ul class="wizard-sidebar-list">
              <li>You‚Äôll message yourself from a partner‚Äôs phone.</li>
              <li>TradeBotPro will reply like a real customer conversation.</li>
              <li>You‚Äôll even be able to book a test job into your diary.</li>
            </ul>
          </div>

          <div class="wizard-sidebar-card">
            <strong>Free trial idea:</strong>
            <p style="margin:0.25rem 0 0;">
              We can offer a short free trial after the demo for anyone who isn‚Äôt
              fully convinced yet ‚Äî your setup stays in place so it‚Äôs easy to switch on.
            </p>
          </div>
        </aside>

        <!-- FORM / PANELS -->
        <section class="wizard-panel-card">
          <form id="setup-form" novalidate>
            <!-- STEP 1 -->
            <div class="wizard-step-panel is-active" data-step="1">
              <h2 class="wizard-step-title">Step 1 ‚Äî Business basics</h2>
              <p class="wizard-step-subtitle">
                Tell us who you are, what trade you‚Äôre in and where you‚Äôre based.
                We‚Äôll use this to introduce you properly and make sure we only offer jobs in the right areas.
              </p>

              <div class="field-group field-row">
                <div>
                  <div class="field-label-row">
                    <label for="business_name">Business name</label>
                  </div>
                  <input id="business_name" name="business_name" type="text" required autocomplete="organization">
                </div>
                <div>
                  <div class="field-label-row">
                    <label for="contact_name">Main contact name</label>
                    <span class="field-hint">Who runs the jobs day to day</span>
                  </div>
                  <input id="contact_name" name="contact_name" type="text" required autocomplete="name">
                </div>
              </div>

              <div class="field-group field-row">
                <div>
                  <div class="field-label-row">
                    <label for="trade_type">What trade are you?</label>
                    <span class="field-hint">Pick the closest match</span>
                  </div>
                  <select id="trade_type" name="trade_type" required>
                    <option value="">Select your trade‚Ä¶</option>
                    <option>Plumber</option>
                    <option>Heating engineer</option>
                    <option>Gas engineer</option>
                    <option>Electrician</option>
                    <option>General builder</option>
                    <option>Handyman / property maintenance</option>
                    <option>Roofer / guttering</option>
                    <option>Landscaper / gardener</option>
                    <option>Painter / decorator</option>
                    <option>Window cleaner</option>
                    <option>Cleaner / carpet cleaner</option>
                    <option>Pest control</option>
                    <option>Other</option>
                  </select>
                </div>
                <div>
                  <div class="field-label-row">
                    <label for="trade_type_notes">Anything specific about your trade? (optional)</label>
                    <span class="field-hint">e.g. ‚Äúboilers only‚Äù, ‚Äúno new builds‚Äù</span>
                  </div>
                  <input id="trade_type_notes" name="trade_type_notes" type="text">
                </div>
              </div>

              <div class="field-group field-row">
                <div>
                  <div class="field-label-row">
                    <label for="base_postcode">Base postcode</label>
                    <span class="field-hint">We‚Äôll anchor everything from here</span>
                  </div>
                  <input id="base_postcode" name="base_postcode" type="text" required autocomplete="postal-code">
                </div>
                <div>
                  <div class="field-label-row">
                    <label for="service_radius">Typical service radius (miles)</label>
                    <span class="field-hint">Rough idea is fine</span>
                  </div>
                  <input id="service_radius" name="service_radius" type="number" min="1" step="1" placeholder="e.g. 10">
                </div>
              </div>

              <div class="field-group">
                <div class="field-label-row">
                  <label>How far do you usually travel?</label>
                  <span class="field-hint">Tick all that apply</span>
                </div>
                <div class="chip-row">
                  <label class="chip">
                    <input type="checkbox" name="travel_style" value="local">
                    Local only (within about 5 miles)
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="travel_style" value="town-plus">
                    Town + nearby villages (up to ~10 miles)
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="travel_style" value="wider-area">
                    Wider area / multiple towns
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="travel_style" value="whole-county">
                    Whole county or city region
                  </label>
                </div>
              </div>

              <div class="field-group field-row">
                <div>
                  <div class="field-label-row">
                    <label for="email">Email for bookings / quotes</label>
                  </div>
                  <input id="email" name="email" type="email" required autocomplete="email">
                </div>
                <div>
                  <div class="field-label-row">
                    <label for="whatsapp_number">Mobile / WhatsApp number</label>
                    <span class="field-hint">Where TradeBotPro will hand over live chats</span>
                  </div>
                  <input id="whatsapp_number" name="whatsapp_number" type="tel" required autocomplete="tel">
                </div>
              </div>

              <div class="field-group">
                <div class="field-label-row">
                  <label for="website_url">Website (if you have one)</label>
                </div>
                <input id="website_url" name="website_url" type="text" placeholder="https://">
              </div>
            </div>

            <!-- STEP 2 -->
            <div class="wizard-step-panel" data-step="2">
              <h2 class="wizard-step-title">Step 2 ‚Äî Jobs &amp; pricing</h2>
              <p class="wizard-step-subtitle">
                We‚Äôll start with some simple rules so TradeBotPro can give sensible ball-park prices
                and know which jobs to push hardest.
              </p>

              <div class="field-group">
                <div class="field-label-row">
                  <label>What types of work should TradeBotPro help with?</label>
                  <span class="field-hint">Tick everything you‚Äôd like it to quote or book</span>
                </div>
                <div class="chip-row">
                  <label class="chip">
                    <input type="checkbox" name="job_types" value="emergency-callouts">
                    Emergency call-outs
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="job_types" value="planned-jobs">
                    Planned jobs / larger quotes
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="job_types" value="small-fixes">
                    Small ‚Äúwhile you‚Äôre here‚Äù jobs
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="job_types" value="annual-servicing">
                    Annual servicing / safety checks
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="job_types" value="landlord-certificates">
                    Landlord certs / compliance
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="job_types" value="other">
                    Other (we‚Äôll ask you later)
                  </label>
                </div>
              </div>

              <div class="field-group">
                <div class="field-label-row">
                  <label>How would you prefer to price most enquiries?</label>
                  <span class="field-hint">We‚Äôll keep it simple to start with</span>
                </div>
                <div class="pill-row-inline">
                  <label class="pill-radio">
                    <input type="radio" name="pricing_style" value="estimate-only">
                    Rough estimate only (range)
                  </label>
                  <label class="pill-radio">
                    <input type="radio" name="pricing_style" value="menu-pricing">
                    Fixed price menu for common jobs
                  </label>
                  <label class="pill-radio">
                    <input type="radio" name="pricing_style" value="hourly-day">
                    Hourly / day rate + parts
                  </label>
                </div>
              </div>

              <div class="field-group field-row">
                <div>
                  <div class="field-label-row">
                    <label for="callout_fee">Typical call-out fee (if any)</label>
                  </div>
                  <input id="callout_fee" name="callout_fee" type="text" placeholder="e.g. ¬£60 call-out, first 30 mins">
                </div>
                <div>
                  <div class="field-label-row">
                    <label for="first_hour_rate">First hour / minimum charge</label>
                  </div>
                  <input id="first_hour_rate" name="first_hour_rate" type="text" placeholder="e.g. ¬£90 first hour">
                </div>
              </div>

              <div class="field-group field-row">
                <div>
                  <div class="field-label-row">
                    <label for="hourly_rate">Hourly rate after first hour</label>
                  </div>
                  <input id="hourly_rate" name="hourly_rate" type="text" placeholder="e.g. ¬£65 per additional hour">
                </div>
                <div>
                  <div class="field-label-row">
                    <label for="quote_minimum">Minimum job value you want</label>
                    <span class="field-hint">Helps filter out tiny jobs if needed</span>
                  </div>
                  <input id="quote_minimum" name="quote_minimum" type="text" placeholder="e.g. ¬£80">
                </div>
              </div>

              <div class="field-group">
                <div class="field-label-row">
                  <label for="pricing_notes">Anything else about your pricing or jobs?</label>
                  <span class="field-hint">E.g. ‚Äúno evenings‚Äù, ‚Äúno commercial‚Äù, ‚Äúfree quotes within 5 miles‚Äù</span>
                </div>
                <textarea id="pricing_notes" name="pricing_notes"></textarea>
              </div>
            </div>

            <!-- STEP 3 -->
            <div class="wizard-step-panel" data-step="3">
              <h2 class="wizard-step-title">Step 3 ‚Äî Messages &amp; reviews</h2>
              <p class="wizard-step-subtitle">
                This is where we make TradeBotPro sound like part of your team and make
                sure reviews land in the right place.
              </p>

              <div class="field-group">
                <div class="field-label-row">
                  <label for="intro_line">How should we introduce your business?</label>
                  <span class="field-hint">We‚Äôll use this at the start of chats</span>
                </div>
                <input
                  id="intro_line"
                  name="intro_line"
                  type="text"
                  placeholder="Hi üëã you‚Äôve reached ClearFlow Plumbing, a local family-run plumbing & heating company based in‚Ä¶"
                >
              </div>

              <div class="field-group">
                <div class="field-label-row">
                  <label>What tone of voice should we use?</label>
                </div>
                <div class="chip-row">
                  <label class="chip">
                    <input type="checkbox" name="tone" value="friendly">
                    Friendly &amp; informal
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="tone" value="professional">
                    Professional but warm
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="tone" value="short-snappy">
                    Short &amp; to-the-point
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="tone" value="detailed">
                    Happy to give detail
                  </label>
                </div>
              </div>

              <div class="field-group">
                <div class="field-label-row">
                  <label>Which review platforms do you use or want to use?</label>
                  <span class="field-hint">We‚Äôll send customers there after each job</span>
                </div>
                <div class="chip-row">
                  <label class="chip">
                    <input type="checkbox" name="review_platforms" value="google">
                    Google reviews
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="review_platforms" value="trustpilot">
                    Trustpilot
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="review_platforms" value="facebook">
                    Facebook
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="review_platforms" value="yell">
                    Yell
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="review_platforms" value="checkatrade">
                    Checkatrade
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="review_platforms" value="mybuilder">
                    MyBuilder
                  </label>
                  <label class="chip">
                    <input type="checkbox" name="review_platforms" value="other">
                    Other / not sure yet
                  </label>
                </div>
              </div>

              <div class="field-group field-row">
                <div>
                  <div class="field-label-row">
                    <label for="review_links">Paste any review links you already have</label>
                    <span class="field-hint">One per line is fine</span>
                  </div>
                  <textarea id="review_links" name="review_links" placeholder="Google, Facebook, Trustpilot links‚Ä¶"></textarea>
                </div>
                <div>
                  <div class="field-label-row">
                    <label for="ai_style_notes">Anything we should avoid saying?</label>
                    <span class="field-hint">e.g. ‚Äúdon‚Äôt talk about guarantees‚Äù</span>
                  </div>
                  <textarea id="ai_style_notes" name="ai_style_notes"></textarea>
                </div>
              </div>
            </div>

            <!-- STEP 4 -->
            <div class="wizard-step-panel" data-step="4">
              <h2 class="wizard-step-title">Step 4 ‚Äî Demo &amp; go-live</h2>
              <p class="wizard-step-subtitle">
                Last bits before your evening demo. We‚Äôll use this information to wire up your
                WhatsApp, calendar and demo status behind the scenes.
              </p>

              <div class="field-group field-row">
                <div>
                  <div class="field-label-row">
                    <label for="demo_evening">Preferred evening to test from your own phones</label>
                    <span class="field-hint">e.g. ‚ÄúWednesday after 7pm‚Äù</span>
                  </div>
                  <input id="demo_evening" name="demo_evening" type="text">
                </div>
                <div>
                  <div class="field-label-row">
                    <label for="demo_test_numbers">Which two mobiles will you test with?</label>
                    <span class="field-hint">Just a rough idea</span>
                  </div>
                  <input id="demo_test_numbers" name="demo_test_numbers" type="text" placeholder="Your number + partner / friend">
                </div>
              </div>

              <div class="field-group field-row">
                <div>
                  <div class="field-label-row">
                    <label>Which calendar do you use for jobs?</label>
                    <span class="field-hint">We‚Äôll hook into this later</span>
                  </div>
                  <div class="chip-row">
                    <label class="chip">
                      <input type="checkbox" name="calendar_type" value="google">
                      Google Calendar
                    </label>
                    <label class="chip">
                      <input type="checkbox" name="calendar_type" value="outlook">
                      Outlook / Office 365
                    </label>
                    <label class="chip">
                      <input type="checkbox" name="calendar_type" value="apple">
                      iPhone / Apple calendar
                    </label>
                    <label class="chip">
                      <input type="checkbox" name="calendar_type" value="paper">
                      Paper diary / wall planner
                    </label>
                    <label class="chip">
                      <input type="checkbox" name="calendar_type" value="other">
                      Other
                    </label>
                  </div>
                </div>
                <div>
                  <div class="field-label-row">
                    <label for="working_hours">Rough working hours</label>
                    <span class="field-hint">So we don‚Äôt book you when you‚Äôre not available</span>
                  </div>
                  <input id="working_hours" name="working_hours" type="text" placeholder="e.g. Mon‚ÄìFri 8‚Äì5, no Sundays">
                </div>
              </div>

              <div class="field-group">
                <div class="field-label-row">
                  <label>Profile status</label>
                  <span class="badge-internal">Internal</span>
                </div>
                <div class="pill-row-inline">
                  <label class="pill-radio">
                    <input type="radio" name="profile_status" value="demo-only">
                    Demo only (no real customers yet)
                  </label>
                  <label class="pill-radio">
                    <input type="radio" name="profile_status" value="demo-plus-leads">
                    Demo + a few real leads
                  </label>
                  <label class="pill-radio">
                    <input type="radio" name="profile_status" value="ready-live">
                    Ready to go live
                  </label>
                  <label class="pill-radio">
                    <input type="radio" name="profile_status" value="live">
                    Fully live with customers
                  </label>
                  <label class="pill-radio">
                    <input type="radio" name="profile_status" value="paused">
                    Paused for now
                  </label>
                </div>
              </div>

              <div class="field-group">
                <div class="field-label-row">
                  <label for="setup_notes">Setup status notes</label>
                  <span class="badge-internal">Internal</span>
                </div>
                <textarea
                  id="setup_notes"
                  name="setup_notes"
                  placeholder="Internal notes only ‚Äî e.g. ‚ÄúWhatsApp connected, calendar link pending, demo booked for next Thursday‚Äù‚Ä¶"
                ></textarea>
              </div>
            </div>

            <!-- FOOTER BUTTONS -->
            <div class="wizard-footer-row">
              <div class="wizard-buttons">
                <button type="button" class="btn-secondary" id="btn-prev">Back</button>
                <button type="button" class="btn-primary" id="btn-next">
                  Next step
                </button>
                <button type="submit" class="btn-primary" id="btn-save" style="display:none;">
                  Save setup (demo only)
                </button>
              </div>
              <div class="wizard-save-status" id="wizard-save-status"></div>
            </div>
          </form>
        </section>
      </div>
    </div>
  </main>
</div>

<script>
  // --- Basic wizard logic (front-end only, no Supabase yet) ---

  const TOTAL_STEPS = 4;
  let currentStep = 1;

  const stepPanels = document.querySelectorAll('.wizard-step-panel');
  const stepPills = document.querySelectorAll('.wizard-step-pill');
  const progressInner = document.getElementById('wizard-progress-inner');
  const prevBtn = document.getElementById('btn-prev');
  const nextBtn = document.getElementById('btn-next');
  const saveBtn = document.getElementById('btn-save');
  const saveStatusEl = document.getElementById('wizard-save-status');
  const form = document.getElementById('setup-form');

  // Display user_id in header (purely cosmetic for now)
  const headerIdLabel = document.getElementById('profile-id-label');
  const urlParams = new URLSearchParams(window.location.search);
  const userId = urlParams.get('user_id');
  if (userId && headerIdLabel) {
    headerIdLabel.textContent = 'Profile ID: ' + userId;
  }

  function updateStepUI() {
    stepPanels.forEach(panel => {
      const step = Number(panel.getAttribute('data-step'));
      panel.classList.toggle('is-active', step === currentStep);
    });

    stepPills.forEach(pill => {
      const target = Number(pill.getAttribute('data-step-target'));
      pill.classList.toggle('is-active', target === currentStep);
      pill.classList.toggle('is-complete', target < currentStep);
    });

    const progressPercent = (currentStep - 1) / (TOTAL_STEPS - 1) * 100;
    if (progressInner) {
      progressInner.style.width = progressPercent + '%';
    }

    if (currentStep === 1) {
      prevBtn.disabled = true;
    } else {
      prevBtn.disabled = false;
    }

    if (currentStep === TOTAL_STEPS) {
      nextBtn.style.display = 'none';
      saveBtn.style.display = 'inline-flex';
    } else {
      nextBtn.style.display = 'inline-flex';
      saveBtn.style.display = 'none';
    }
  }

  function goToStep(step) {
    if (step < 1 || step > TOTAL_STEPS) return;
    currentStep = step;
    updateStepUI();
    saveStatusEl.textContent = '';
    saveStatusEl.className = 'wizard-save-status';
  }

  // Step pill click
  stepPills.forEach(pill => {
    pill.addEventListener('click', () => {
      const target = Number(pill.getAttribute('data-step-target'));
      goToStep(target);
    });
  });

  // Back / next
  prevBtn.addEventListener('click', () => {
    goToStep(currentStep - 1);
  });

  nextBtn.addEventListener('click', () => {
    goToStep(currentStep + 1);
  });

  // Simple "demo-only" save: store in localStorage so you can refresh without losing it
  form.addEventListener('submit', (event) => {
    event.preventDefault();

    if (!form.checkValidity()) {
      form.reportValidity();
      return;
    }

    try {
      const formData = new FormData(form);
      const data = {};
      for (const [key, value] of formData.entries()) {
        // Handle multiple selection fields
        if (key === 'job_types' || key === 'travel_style' || key === 'tone' ||
            key === 'review_platforms' || key === 'calendar_type') {
          if (!Array.isArray(data[key])) data[key] = [];
          data[key].push(value);
        } else {
          data[key] = value;
        }
      }

      // Include user_id for later wiring, if present
      if (userId) {
        data.user_id = userId;
      }

      localStorage.setItem('tradebotpro_setup_preview', JSON.stringify(data));

      saveStatusEl.textContent = 'Profile saved in this browser (demo only for now). We can wire this to the live database later.';
      saveStatusEl.className = 'wizard-save-status wizard-save-status--success';
    } catch (err) {
      console.error('Demo save error:', err);
      saveStatusEl.textContent = 'Something went wrong saving locally. Your answers are still here, but we couldn‚Äôt store them in this browser.';
      saveStatusEl.className = 'wizard-save-status wizard-save-status--error';
    }
  });

  // Cosmetic: turn chips / pill radios ‚Äúon‚Äù visually when checked
  function initChipBehaviour() {
    document.querySelectorAll('.chip input[type="checkbox"]').forEach(input => {
      const chip = input.closest('.chip');
      const update = () => {
        if (!chip) return;
        chip.classList.toggle('is-selected', input.checked);
      };
      input.addEventListener('change', update);
      update();
    });

    document.querySelectorAll('.pill-radio input[type="radio"]').forEach(input => {
      const name = input.name;
      input.addEventListener('change', () => {
        document
          .querySelectorAll('.pill-radio input[name="' + name + '"]')
          .forEach(r => {
            const pill = r.closest('.pill-radio');
            if (!pill) return;
            pill.classList.toggle('is-selected', r.checked);
          });
      });
      // Initialise
      if (input.checked) {
        const pill = input.closest('.pill-radio');
        if (pill) pill.classList.add('is-selected');
      }
    });
  }

  initChipBehaviour();
  updateStepUI();
</script>
</body>
</html>
