<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>TradeBotPro — Get your AI office set up</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="TradeBotPro is an AI office assistant for trades. Handle enquiries, quotes and bookings automatically." />

<style>
:root{
  --blue:#1f4e79;
  --bg:#f5f7fa;
  --card:#ffffff;
  --border:#d1d5db;
  --text:#1b1b1f;
  --muted:#6b7280;
}
*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
}

header{
  background:#ffffff;
  border-bottom:1px solid var(--border);
  padding:18px 0;
}

.header-inner{
  max-width:920px;
  margin:0 auto;
  padding:0 16px;
}

header h1{
  margin:0;
  font-size:30px;
}

header p{
  margin:6px 0 0;
  color:var(--muted);
  max-width:640px;
}

main{
  max-width:920px;
  margin:32px auto 64px;
  padding:0 16px;
}

.form-card{
  background:var(--card);
  border-radius:18px;
  border:1px solid var(--border);
  padding:28px;
}

fieldset{
  border:none;
  padding:0;
  margin:0 0 22px 0;
}

label{
  display:block;
  font-size:13px;
  font-weight:600;
  margin-bottom:6px;
}

input, select, textarea{
  width:100%;
  padding:12px 14px;
  font-size:15px;
  border-radius:12px;
  border:1px solid var(--border);
  font-family:inherit;
}

input:focus, select:focus, textarea:focus{
  outline:none;
  border-color:var(--blue);
}

textarea{
  min-height:90px;
}

.row{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:18px;
}

@media(max-width:680px){
  .row{grid-template-columns:1fr}
}

.chips{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

.chip{
  padding:8px 14px;
  border-radius:999px;
  border:1px solid var(--border);
  background:#fff;
  font-size:14px;
  cursor:pointer;
}

.chip.active{
  background:var(--blue);
  color:#fff;
  border-color:var(--blue);
}

button{
  width:100%;
  margin-top:10px;
  padding:16px;
  border-radius:999px;
  border:none;
  background:var(--blue);
  color:#fff;
  font-size:16px;
  cursor:pointer;
}

button:disabled{
  opacity:.6;
  cursor:not-allowed;
}

.notice{
  margin-top:14px;
  font-size:14px;
}

.notice.success{color:#15803d}
.notice.error{color:#b91c1c}

.footer-note{
  margin-top:14px;
  font-size:12px;
  color:var(--muted);
}
</style>
</head>

<body>

<header>
  <div class="header-inner">
    <h1>Set up your AI office</h1>
    <p>
      Tell us a bit about your business. We’ll set TradeBotPro up so it handles enquiries,
      messages and bookings the way <strong>you</strong> want it to.
    </p>
  </div>
</header>

<main>
  <div class="form-card">
    <form id="signupForm">

      <fieldset>
        <label for="business_name">Business name</label>
        <input required id="business_name" />
      </fieldset>

      <div class="row">
        <fieldset>
          <label for="owner_name">Owner name</label>
          <input id="owner_name" />
        </fieldset>
        <fieldset>
          <label for="contact_name">Main contact name</label>
          <input id="contact_name" />
        </fieldset>
      </div>

      <div class="row">
        <fieldset>
          <label for="email">Email</label>
          <input type="email" id="email" required />
        </fieldset>
        <fieldset>
          <label for="phone">WhatsApp number</label>
          <input id="phone" required placeholder="e.g. 07700 900123" />
        </fieldset>
      </div>

      <div class="row">
        <fieldset>
          <label for="trade_type">Trade</label>
          <select id="trade_type" required>
            <option value="">— Select your trade —</option>
            <option>Plumber</option>
            <option>Heating engineer</option>
            <option>Gas engineer</option>
            <option>Electrician</option>
            <option>Roofer</option>
            <option>Builder</option>
            <option>Other</option>
          </select>
        </fieldset>
        <fieldset>
          <label for="base_postcode">Base postcode</label>
          <input id="base_postcode" required />
        </fieldset>
      </div>

      <fieldset>
        <label for="website_url">Website (optional)</label>
        <input id="website_url" />
      </fieldset>

      <fieldset>
        <label>What should your AI office focus on?</label>
        <div class="chips" id="focusChips">
          <div class="chip">Answering enquiries</div>
          <div class="chip">Booking jobs</div>
          <div class="chip">Pricing & quotes</div>
          <div class="chip">Out of hours messages</div>
          <div class="chip">Reducing missed calls</div>
        </div>
      </fieldset>

      <fieldset>
        <label for="ai_style_notes">Anything else we should know?</label>
        <textarea id="ai_style_notes" placeholder="For example: service area, typical pricing, or how you like to deal with customers"></textarea>
      </fieldset>

      <button id="submitBtn">Submit details</button>
      <div id="formNotice" class="notice"></div>

      <div class="footer-note">
        We’ll review your details and get in touch to finish setting things up.
      </div>

    </form>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
/* CHANGE THESE TWO LINES ONLY */
const SUPABASE_URL = "https://yaiutswdcbfwkxfqxkzy.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlhaXV0c3dkY2Jmd2t4ZnF4a3p5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MDE2MDgsImV4cCI6MjA4MDA3NzYwOH0.HOLFxzjsZ5Ieqg0b-aTdP0hAdLsPVXL6Zjs-HgOHgc8";

const supabase = window.supabase.createClient(
  SUPABASE_URL,
  SUPABASE_ANON_KEY
);

const form = document.getElementById('signupForm');
const btn = document.getElementById('submitBtn');
const notice = document.getElementById('formNotice');

document.querySelectorAll('.chip').forEach(chip=>{
  chip.onclick=()=>chip.classList.toggle('active');
});

form.onsubmit = async (e)=>{
  e.preventDefault();
  btn.disabled=true;
  notice.textContent='Submitting…';
  notice.className='notice';

  const focus = [...document.querySelectorAll('.chip.active')]
    .map(c=>c.textContent)
    .join(', ');

  const payload = {
    business_name: business_name.value,
    owner_name: owner_name.value,
    contact_name: contact_name.value,
    email: email.value,
    phone: phone.value,
    trade_type: trade_type.value,
    base_postcode: base_postcode.value,
    website_url: website_url.value,
    services_summary: focus,
    ai_style_notes: ai_style_notes.value,
    plan_status: 'Trial',
    pending_setup: 'Not started',
    account_status: 'New',
    is_active: false
  };

  const { error } = await supabase
    .from('tradebotpro_signups')
    .insert([payload]);

  if(error){
    console.error(error);
    notice.textContent='Something went wrong saving your details. Please try again or contact us.';
    notice.className='notice error';
    btn.disabled=false;
    return;
  }

  notice.textContent='Thank you — we’ve received your details. We’ll be in touch shortly.';
  notice.className='notice success';
  form.reset();
  document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
};
</script>

</body>
</html>
