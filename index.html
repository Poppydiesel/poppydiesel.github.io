<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TradeBotPro ‚Äî Tell us about your business</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="TradeBotPro is a 24/7 AI office assistant for trades and home services. More jobs, less admin, powered by AI."
  />

  <style>
    :root {
      --primary-blue: #1f4e79;
      --accent-blue: #00a3ff;
      --dark-text: #1b1b1f;
      --muted-text: #555b66;
      --light-bg: #f5f7fa;
      --card-bg: #ffffff;
      --border-subtle: #dde3ec;
      --error: #b3261e;
      --success: #137333;
      --chip-bg: #edf2ff;
      --chip-bg-active: #1f4e79;
      --chip-text: #1f2933;
      --chip-text-active: #ffffff;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background: radial-gradient(circle at top, #e3f2ff 0, #f5f7fa 40%, #f5f7fa 100%);
      color: var(--dark-text);
      line-height: 1.6;
    }

    .page {
      min-height: 100vh;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      padding: 32px 16px 48px;
    }

    .card {
      width: 100%;
      max-width: 920px;
      background: var(--card-bg);
      border-radius: 24px;
      box-shadow: 0 18px 60px rgba(15, 23, 42, 0.18);
      padding: 28px 24px 28px;
      display: grid;
      grid-template-columns: 1.1fr 1.4fr;
      gap: 32px;
    }

    @media (max-width: 840px) {
      .card {
        grid-template-columns: 1fr;
        padding: 20px 18px 24px;
      }
    }

    .card-left h1 {
      font-size: 1.6rem;
      margin: 0 0 8px;
      color: var(--primary-blue);
    }

    .card-left h2 {
      font-size: 1.1rem;
      margin: 0 0 16px;
      font-weight: 600;
    }

    .lead {
      font-size: 0.95rem;
      color: var(--muted-text);
      margin-bottom: 16px;
    }

    .bullets {
      margin: 0 0 16px;
      padding-left: 18px;
      font-size: 0.9rem;
      color: var(--muted-text);
    }

    .bullets li + li {
      margin-top: 4px;
    }

    .tick-line {
      font-size: 0.9rem;
      color: var(--primary-blue);
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .tick-line span {
      font-size: 1.1rem;
    }

    .steps-list {
      margin-top: 24px;
      font-size: 0.85rem;
      color: var(--muted-text);
    }

    .steps-list strong {
      display: block;
      margin-bottom: 6px;
      color: var(--dark-text);
    }

    .steps-list ol {
      margin: 0;
      padding-left: 18px;
    }

    /* Right / form side */

    .step-label {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted-text);
      margin-bottom: 6px;
      font-weight: 600;
    }

    .step-title {
      font-size: 1.05rem;
      margin: 0 0 2px;
      font-weight: 600;
      color: var(--primary-blue);
    }

    .step-subtitle {
      font-size: 0.9rem;
      color: var(--muted-text);
      margin-bottom: 12px;
    }

    .progress-shell {
      margin-bottom: 18px;
    }

    .progress-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
      font-size: 0.82rem;
      color: var(--muted-text);
    }

    .progress-top strong {
      color: var(--primary-blue);
    }

    .progress-bar-outer {
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: #e2e8f0;
      overflow: hidden;
    }

    .progress-bar-inner {
      height: 100%;
      width: 0%;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--primary-blue), var(--accent-blue));
      transition: width 0.25s ease-out;
    }

    form {
      font-size: 0.9rem;
    }

    .form-step {
      display: none;
      animation: fadeIn 0.18s ease-out;
    }

    .form-step.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(4px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .field-group {
      margin-bottom: 14px;
    }

    .field-label-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 4px;
    }

    label {
      font-size: 0.86rem;
      font-weight: 600;
      color: var(--dark-text);
    }

    .field-hint {
      font-size: 0.78rem;
      color: var(--muted-text);
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="number"],
    select,
    textarea {
      width: 100%;
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
      padding: 8px 10px;
      font-size: 0.9rem;
      font-family: inherit;
      outline: none;
      background: #f9fbff;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    textarea {
      min-height: 72px;
      resize: vertical;
    }

    input:focus,
    select:focus,
    textarea:focus {
      border-color: var(--accent-blue);
      background: #ffffff;
      box-shadow: 0 0 0 1px rgba(0, 163, 255, 0.3);
    }

    select {
      appearance: none;
      background-image: linear-gradient(45deg, transparent 50%, #6b7280 50%),
        linear-gradient(135deg, #6b7280 50%, transparent 50%);
      background-position: calc(100% - 14px) 50%, calc(100% - 9px) 50%;
      background-size: 6px 6px, 6px 6px;
      background-repeat: no-repeat;
      padding-right: 26px;
    }

    .columns-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    @media (max-width: 640px) {
      .columns-2 {
        grid-template-columns: 1fr;
      }
    }

    .checkbox-list {
      display: grid;
      grid-template-columns: 1fr;
      gap: 6px;
      margin-top: 4px;
    }

    .checkbox-item {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      padding: 6px 8px;
      border-radius: 10px;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
    }

    .checkbox-item input {
      margin-top: 3px;
    }

    .checkbox-copy {
      font-size: 0.86rem;
    }

    .checkbox-copy strong {
      display: block;
      margin-bottom: 1px;
      color: var(--dark-text);
    }

    .checkbox-copy span {
      color: var(--muted-text);
    }

    /* Focus chips */

    .chip-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin: 6px 0 6px;
    }

    .chip {
      border: 1px solid var(--primary-blue);
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 0.82rem;
      background: var(--chip-bg);
      color: var(--chip-text);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: background 0.15s ease, color 0.15s ease, transform 0.08s ease, box-shadow 0.15s ease;
      user-select: none;
    }

    .chip::before {
      content: "+";
      font-weight: 700;
      font-size: 0.8rem;
      opacity: 0.8;
    }

    .chip.selected {
      background: var(--chip-bg-active);
      color: var(--chip-text-active);
      box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.8);
      transform: translateY(-1px);
    }

    .chip.selected::before {
      content: "‚úì";
    }

    .chip:focus-visible {
      outline: 2px solid var(--accent-blue);
      outline-offset: 2px;
    }

    .chip-helper {
      font-size: 0.78rem;
      color: var(--muted-text);
      margin-bottom: 6px;
    }

    /* Footer buttons */

    .step-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 18px;
      gap: 8px;
    }

    .btn {
      border-radius: 999px;
      border: none;
      font-size: 0.88rem;
      padding: 8px 16px;
      cursor: pointer;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-family: inherit;
      transition: background 0.15s ease, color 0.15s ease, box-shadow 0.15s ease, transform 0.08s ease;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary-blue), var(--accent-blue));
      color: #ffffff;
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.25);
    }

    .btn-primary:hover {
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.3);
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: #e5edf6;
      color: var(--primary-blue);
    }

    .btn-secondary:hover {
      background: #d8e4f4;
    }

    .btn[disabled] {
      opacity: 0.65;
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    .status-message {
      margin-top: 14px;
      font-size: 0.86rem;
      display: none;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid transparent;
    }

    .status-message.success {
      color: var(--success);
      border-color: rgba(19, 115, 51, 0.18);
      background: #f0f9f2;
    }

    .status-message.error {
      color: var(--error);
      border-color: rgba(179, 38, 30, 0.18);
      background: #fdf3f2;
    }

    .status-message strong {
      margin-right: 4px;
    }

    .small-print {
      font-size: 0.8rem;
      color: var(--muted-text);
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="card">
      <!-- LEFT SIDE / PITCH -->
      <div class="card-left">
        <h1>TradeBotPro ‚Ä¢ AI office for trades</h1>
        <h2>Tell us about your business in 60 seconds</h2>

        <p class="lead">
          Answer a few quick questions and we‚Äôll set up your AI office to speak like you, quote like you,
          and book work straight into your diary.
        </p>

        <ul class="bullets">
          <li>‚ö° Reply to new enquiries in seconds ‚Äî even when you‚Äôre on a roof or under a boiler.</li>
          <li>üìÖ Turn quotes into booked jobs with friendly follow-ups and reminders.</li>
          <li>üí¨ WhatsApp, web chat, and email ‚Äî one AI office that never clocks off.</li>
          <li>üí∏ Chase unpaid invoices and reviews without awkward phone calls.</li>
        </ul>

        <p class="tick-line">
          <span>‚úÖ</span> No long forms. Just tick what you do and what you want help with.
        </p>

        <div class="steps-list">
          <strong>What we‚Äôll ask you for:</strong>
          <ol>
            <li>Business basics</li>
            <li>Where you work & typical pricing</li>
            <li>What your AI office should focus on</li>
            <li>Quick confirmation & submit</li>
          </ol>
        </div>
      </div>

      <!-- RIGHT SIDE / MULTI-STEP FORM -->
      <div>
        <div class="progress-shell">
          <div class="progress-top">
            <div>Step <strong id="step-current">1</strong> of <strong>4</strong></div>
            <div id="step-label-text">Business basics</div>
          </div>
          <div class="progress-bar-outer">
            <div class="progress-bar-inner" id="progress-bar-inner"></div>
          </div>
        </div>

        <form id="signup-form">
          <!-- STEP 1: BUSINESS BASICS -->
          <div class="form-step active" data-step="1">
            <div class="step-label">Step 1 of 4</div>
            <h3 class="step-title">First, the basics</h3>
            <p class="step-subtitle">
              These details tell us who we‚Äôre setting TradeBotPro up for and how to contact you.
            </p>

            <div class="field-group">
              <div class="field-label-row">
                <label for="business_name">Business name *</label>
                <span class="field-hint">E.g. ‚ÄúTest Plumber Ltd‚Äù</span>
              </div>
              <input id="business_name" name="business_name" type="text" required />
            </div>

            <div class="field-group">
              <div class="field-label-row">
                <label for="trade_type">Trade *</label>
              </div>
              <select id="trade_type" name="trade_type" required>
                <option value="">Please choose‚Ä¶</option>
                <option>Plumbing &amp; heating</option>
                <option>Gas engineer</option>
                <option>Electrician</option>
                <option>Roofing</option>
                <option>Landscaping &amp; gardening</option>
                <option>Handyman / multi-trade</option>
                <option>Other</option>
              </select>
            </div>

            <div class="columns-2">
              <div class="field-group">
                <div class="field-label-row">
                  <label for="owner_name">Your name *</label>
                  <span class="field-hint">The main decision-maker we‚Äôll speak to.</span>
                </div>
                <input id="owner_name" name="owner_name" type="text" required />
              </div>

              <div class="field-group">
                <div class="field-label-row">
                  <label for="contact_name">Contact name (if different)</label>
                  <span class="field-hint">Leave blank if it‚Äôs just you.</span>
                </div>
                <input id="contact_name" name="contact_name" type="text" />
              </div>
            </div>

            <div class="columns-2">
              <div class="field-group">
                <div class="field-label-row">
                  <label for="email">Email *</label>
                  <span class="field-hint">Where should we send setup details?</span>
                </div>
                <input id="email" name="email" type="email" required />
              </div>
              <div class="field-group">
                <div class="field-label-row">
                  <label for="phone">Mobile or WhatsApp number *</label>
                  <span class="field-hint">So we can test your AI office with you.</span>
                </div>
                <input id="phone" name="phone" type="tel" required />
              </div>
            </div>

            <div class="field-group">
              <div class="field-label-row">
                <label for="website_url">Website (if you have one)</label>
                <span class="field-hint">We‚Äôll use this to match your branding and tone.</span>
              </div>
              <input id="website_url" name="website_url" type="text" />
            </div>

            <div class="step-footer">
              <button type="button" class="btn btn-secondary" disabled>‚Üê Back</button>
              <button type="button" class="btn btn-primary" data-next>Next ‚Üí</button>
            </div>
          </div>

          <!-- STEP 2: AREA & PRICING -->
          <div class="form-step" data-step="2">
            <div class="step-label">Step 2 of 4</div>
            <h3 class="step-title">Where you work & typical pricing</h3>
            <p class="step-subtitle">
              This helps TradeBotPro answer ‚ÄúHow much do you charge?‚Äù without you picking up the phone.
            </p>

            <div class="columns-2">
              <div class="field-group">
                <div class="field-label-row">
                  <label for="base_postcode">Base postcode *</label>
                  <span class="field-hint">E.g. HP14 3QF ‚Äî we won‚Äôt share this publicly.</span>
                </div>
                <input id="base_postcode" name="base_postcode" type="text" required />
              </div>

              <div class="field-group">
                <div class="field-label-row">
                  <label for="service_radius">How far do you usually travel?</label>
                  <span class="field-hint">We‚Äôll use this as a guide for job locations.</span>
                </div>
                <input id="service_radius" name="service_radius" type="text" />
              </div>
            </div>

            <div class="columns-2">
              <div class="field-group">
                <div class="field-label-row">
                  <label for="callout_fee">Call-out fee (if any)</label>
                  <span class="field-hint">Leave blank if you don‚Äôt charge a call-out.</span>
                </div>
                <input id="callout_fee" name="callout_fee" type="text" />
              </div>
              <div class="field-group">
                <div class="field-label-row">
                  <label for="first_hour_rate">First hour rate</label>
                  <span class="field-hint">We can say ‚Äútypically from‚Ä¶‚Äù in replies.</span>
                </div>
                <input id="first_hour_rate" name="first_hour_rate" type="text" />
              </div>
            </div>

            <div class="columns-2">
              <div class="field-group">
                <div class="field-label-row">
                  <label for="hourly_rate">Hourly rate after first hour</label>
                </div>
                <input id="hourly_rate" name="hourly_rate" type="text" />
              </div>
              <div class="field-group">
                <div class="field-label-row">
                  <label for="boiler_service_from">Boiler service from</label>
                </div>
                <input id="boiler_service_from" name="boiler_service_from" type="text" />
              </div>
            </div>

            <div class="field-group">
              <div class="field-label-row">
                <label for="quote_minimum">Typical minimum for small jobs</label>
                <span class="field-hint">Helps avoid time-wasters on tiny jobs.</span>
              </div>
              <input id="quote_minimum" name="quote_minimum" type="text" />
            </div>

            <div class="step-footer">
              <button type="button" class="btn btn-secondary" data-back>‚Üê Back</button>
              <button type="button" class="btn btn-primary" data-next>Next ‚Üí</button>
            </div>
          </div>

          <!-- STEP 3: SERVICES + AI FOCUS (WITH CHIPS) -->
          <div class="form-step" data-step="3">
            <div class="step-label">Step 3 of 4</div>
            <h3 class="step-title">What you do & what your AI office should focus on</h3>
            <p class="step-subtitle">
              Tick what you offer and where you‚Äôd love TradeBotPro to take the pressure off first.
            </p>

            <!-- Services -->
            <div class="field-group">
              <div class="field-label-row">
                <label>What services do you offer? *</label>
                <span class="field-hint">Tick all that apply ‚Äî we‚Äôll turn this into a simple ‚ÄúWhat we do‚Äù summary.</span>
              </div>

              <div class="checkbox-list">
                <label class="checkbox-item">
                  <input type="checkbox" name="services" value="Emergency callouts" />
                  <div class="checkbox-copy">
                    <strong>Emergency callouts</strong>
                    <span>Burst pipes, leaks, no heating, no hot water, etc.</span>
                  </div>
                </label>

                <label class="checkbox-item">
                  <input type="checkbox" name="services" value="Boiler servicing & safety checks" />
                  <div class="checkbox-copy">
                    <strong>Boiler servicing &amp; safety checks</strong>
                    <span>Annual services, landlord certificates, safety checks.</span>
                  </div>
                </label>

                <label class="checkbox-item">
                  <input type="checkbox" name="services" value="New boiler installs & upgrades" />
                  <div class="checkbox-copy">
                    <strong>New boiler installs &amp; upgrades</strong>
                    <span>Quoting, site visits, finance options (if applicable).</span>
                  </div>
                </label>

                <label class="checkbox-item">
                  <input type="checkbox" name="services" value="General plumbing" />
                  <div class="checkbox-copy">
                    <strong>General plumbing</strong>
                    <span>Taps, toilets, radiators, cylinders, bathrooms, etc.</span>
                  </div>
                </label>

                <label class="checkbox-item">
                  <input type="checkbox" name="services" value="Planned maintenance contracts" />
                  <div class="checkbox-copy">
                    <strong>Planned maintenance contracts</strong>
                    <span>For landlords, agents, commercial clients, etc.</span>
                  </div>
                </label>

                <label class="checkbox-item">
                  <input type="checkbox" name="services" value="Other specialist services" />
                  <div class="checkbox-copy">
                    <strong>Other specialist services</strong>
                    <span>Water softeners, powerflushing, underfloor heating, etc.</span>
                  </div>
                </label>
              </div>
            </div>

            <div class="field-group">
              <div class="field-label-row">
                <label for="services_other">Anything else we should mention?</label>
              </div>
              <textarea id="services_other" name="services_other" placeholder="E.g. commercial work, specific brands, niches‚Ä¶"></textarea>
            </div>

            <!-- AI office focus ‚Äì CHIPS + SHORT TEXT -->
            <div class="field-group">
              <div class="field-label-row">
                <label>What should your AI office focus on first?</label>
              </div>
              <p class="chip-helper">
                Tap all that apply ‚Äì we‚Äôll prioritise these when we tune your AI.
              </p>

              <div class="chip-grid" id="ai-focus-chips">
                <button type="button" class="chip focus-chip" data-value="Answering new enquiries quickly">
                  Answering new enquiries quickly
                </button>
                <button type="button" class="chip focus-chip" data-value="Turning quotes into booked jobs">
                  Turning quotes into booked jobs
                </button>
                <button type="button" class="chip focus-chip" data-value="Managing your diary & appointments">
                  Managing your diary & appointments
                </button>
                <button type="button" class="chip focus-chip" data-value="Out-of-hours cover">
                  Out-of-hours cover
                </button>
                <button type="button" class="chip focus-chip" data-value="Chasing unpaid invoices">
                  Chasing unpaid invoices
                </button>
                <button type="button" class="chip focus-chip" data-value="Getting more reviews">
                  Getting more reviews
                </button>
              </div>

              <div class="field-group">
                <div class="field-label-row">
                  <label for="ai_focus_extra">Anything specific we should tackle first?</label>
                  <span class="field-hint">A short sentence is plenty.</span>
                </div>
                <input
                  id="ai_focus_extra"
                  name="ai_focus_extra"
                  type="text"
                  placeholder="E.g. ‚ÄúFollow up old boiler quotes and fill Tuesday mornings.‚Äù"
                />
              </div>
            </div>

            <!-- Tone / voice -->
            <div class="field-group">
              <div class="field-label-row">
                <label for="ai_tone_notes">Anything specific about tone or how we should speak for you?</label>
                <span class="field-hint">Don‚Äôt overthink it ‚Äî a couple of bullet points is enough.</span>
              </div>
              <textarea
                id="ai_tone_notes"
                name="ai_tone_notes"
                placeholder="E.g. ‚ÄúFriendly but straight-talking, no hard sell. Keep messages short and avoid jargon.‚Äù"
              ></textarea>
            </div>

            <div class="step-footer">
              <button type="button" class="btn btn-secondary" data-back>‚Üê Back</button>
              <button type="button" class="btn btn-primary" data-next>Next ‚Üí</button>
            </div>
          </div>

          <!-- STEP 4: CONFIRM & SUBMIT -->
          <div class="form-step" data-step="4">
            <div class="step-label">Step 4 of 4</div>
            <h3 class="step-title">Confirm & submit</h3>
            <p class="step-subtitle">
              Quick check and then you‚Äôre done. We‚Äôll use this info to set up your TradeBotPro AI office and get in touch.
            </p>

            <div class="field-group">
              <div class="field-label-row">
                <label>What happens next</label>
              </div>
              <ul class="bullets" style="margin-top: 4px;">
                <li>We review your answers & build a first version of your AI office.</li>
                <li>We walk through it with you on WhatsApp or a quick call.</li>
                <li>Once you‚Äôre happy, we switch it on for your customers.</li>
              </ul>
            </div>

            <div class="field-group">
              <div class="field-label-row">
                <label for="anything_else">Anything else we should know?</label>
              </div>
              <textarea
                id="anything_else"
                name="anything_else"
                placeholder="Optional ‚Äî only if there‚Äôs something important we‚Äôve not covered."
              ></textarea>
            </div>

            <p class="small-print">
              By submitting, you agree we can contact you about setting up TradeBotPro for your business.
              We‚Äôll never sell your data to anyone else.
            </p>

            <div class="step-footer">
              <button type="button" class="btn btn-secondary" data-back>‚Üê Back</button>
              <button type="submit" class="btn btn-primary" id="submit-btn">
                Submit details ‚ö°
              </button>
            </div>

            <div id="success-message" class="status-message success">
              <strong>‚úÖ Thank you ‚Äì</strong> we‚Äôve received your details. We‚Äôll be in touch shortly.
            </div>
            <div id="error-message" class="status-message error">
              <strong>‚ö†Ô∏è Something went wrong saving your details.</strong> Please try again or contact us.
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // -----------------------
    // BASIC STEP / PROGRESS
    // -----------------------
    const form = document.getElementById('signup-form');
    const steps = Array.from(document.querySelectorAll('.form-step'));
    const progressBarInner = document.getElementById('progress-bar-inner');
    const stepCurrentEl = document.getElementById('step-current');
    const stepLabelText = document.getElementById('step-label-text');
    const totalSteps = steps.length;

    const stepLabels = {
      1: 'Business basics',
      2: 'Area & pricing',
      3: 'AI office focus',
      4: 'Confirm'
    };

    let currentStep = 1;

    function updateStepDisplay() {
      steps.forEach(step => {
        step.classList.toggle('active', Number(step.dataset.step) === currentStep);
      });

      stepCurrentEl.textContent = currentStep.toString();
      stepLabelText.textContent = stepLabels[currentStep] || '';

      const pct = (currentStep - 1) / (totalSteps - 1) * 100;
      progressBarInner.style.width = pct + '%';
    }

    document.querySelectorAll('[data-next]').forEach(btn => {
      btn.addEventListener('click', () => {
        if (currentStep < totalSteps) {
          currentStep += 1;
          updateStepDisplay();
        }
      });
    });

    document.querySelectorAll('[data-back]').forEach(btn => {
      btn.addEventListener('click', () => {
        if (currentStep > 1) {
          currentStep -= 1;
          updateStepDisplay();
        }
      });
    });

    updateStepDisplay();

    // -----------------------
    // FOCUS CHIPS LOGIC
    // -----------------------
    const focusChips = Array.from(document.querySelectorAll('.focus-chip'));

    focusChips.forEach(chip => {
      chip.addEventListener('click', () => {
        chip.classList.toggle('selected');
      });
    });

    // -----------------------
    // SUPABASE CONFIG
    // -----------------------
    const SUPABASE_URL = "https://yaiutswdcbfwkxfqxkzy.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlhaXV0c3dkY2Jmd2t4ZnF4a3p5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MDE2MDgsImV4cCI6MjA4MDA3NzYwOH0.HOLFxzjsZ5Ieqg0b-aTdP0hAdLsPVXL6Zjs-HgOHgc8";

    const submitBtn = document.getElementById('submit-btn');
    const successMessage = document.getElementById('success-message');
    const errorMessage = document.getElementById('error-message');

    function showStatus(type, msgHtml) {
      if (type === 'success') {
        successMessage.innerHTML = msgHtml;
        successMessage.style.display = 'block';
        errorMessage.style.display = 'none';
      } else if (type === 'error') {
        errorMessage.innerHTML = msgHtml;
        errorMessage.style.display = 'block';
        successMessage.style.display = 'none';
      } else {
        successMessage.style.display = 'none';
        errorMessage.style.display = 'none';
      }
    }

    // -----------------------
    // BUILD PAYLOAD
    // -----------------------
    function buildPayloadFromForm() {
      // Basic details
      const business_name = document.getElementById('business_name').value.trim();
      const trade_type = document.getElementById('trade_type').value.trim();
      const owner_name = document.getElementById('owner_name').value.trim();
      const contact_name = document.getElementById('contact_name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const website_url = document.getElementById('website_url').value.trim();

      // Area / pricing
      const base_postcode = document.getElementById('base_postcode').value.trim();
      const callout_fee = document.getElementById('callout_fee').value.trim();
      const first_hour_rate = document.getElementById('first_hour_rate').value.trim();
      const hourly_rate = document.getElementById('hourly_rate').value.trim();
      const boiler_service_from = document.getElementById('boiler_service_from').value.trim();
      const quote_minimum = document.getElementById('quote_minimum').value.trim();

      // Services summary
      const selectedServices = Array.from(document.querySelectorAll('input[name="services"]:checked'))
        .map(cb => cb.value.trim());
      const services_other = document.getElementById('services_other').value.trim();

      let services_summary = '';
      if (selectedServices.length) {
        services_summary += 'Core services: ' + selectedServices.join(', ');
      }
      if (services_other) {
        services_summary += (services_summary ? ' | ' : '') + 'Other / notes: ' + services_other;
      }

      // AI focus chips
      const selectedFocuses = focusChips
        .filter(chip => chip.classList.contains('selected'))
        .map(chip => chip.dataset.value.trim());
      const ai_focus_extra = document.getElementById('ai_focus_extra').value.trim();
      const ai_tone_notes = document.getElementById('ai_tone_notes').value.trim();
      const anything_else = document.getElementById('anything_else').value.trim();

      let ai_focus_block = '';
      if (selectedFocuses.length) {
        ai_focus_block += 'Key focus areas: ' + selectedFocuses.join(', ');
      }
      if (ai_focus_extra) {
        ai_focus_block += (ai_focus_block ? ' | ' : '') + 'Extra focus notes: ' + ai_focus_extra;
      }

      let ai_style_notes = '';
      if (ai_focus_block) {
        ai_style_notes += 'AI focus:\n' + ai_focus_block;
      }
      if (ai_tone_notes) {
        ai_style_notes += (ai_style_notes ? '\n\n' : '') + 'Tone & voice:\n' + ai_tone_notes;
      }
      if (anything_else) {
        ai_style_notes += (ai_style_notes ? '\n\n' : '') + 'Other notes:\n' + anything_else;
      }

      // System / status fields ‚Äì keep simple, DB trigger handles business_profiles
      const plan_status = 'Lead - New';
      const pending_setup = true;
      const is_active = false;
      const account_status = 'Lead - New';
      const account_status_reason = 'Signup form submission via website';

      return {
        business_name,
        owner_name,
        contact_name,
        email,
        phone,
        trade_type,
        base_postcode,
        website_url,
        callout_fee,
        first_hour_rate,
        hourly_rate,
        boiler_service_from,
        quote_minimum,
        services_summary,
        ai_style_notes,
        plan_status,
        pending_setup,
        is_active,
        account_status,
        account_status_reason
      };
    }

    // -----------------------
    // SUBMIT HANDLER
    // -----------------------
    form.addEventListener('submit', async (event) => {
      event.preventDefault();
      showStatus(null, '');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Submitting‚Ä¶';

      const payload = buildPayloadFromForm();
      console.log('Submitting payload to Supabase:', payload);

      try {
        const res = await fetch(`${supabaseUrl}/rest/v1/tradebotpro_signups`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            apikey: supabaseAnonKey,
            Authorization: `Bearer ${supabaseAnonKey}`,
            Prefer: 'return=representation'
          },
          body: JSON.stringify(payload)
        });

        if (!res.ok) {
          const errData = await res.json().catch(() => ({}));
          console.error('Supabase insert error:', errData);
          showStatus('error',
            '<strong>‚ö†Ô∏è Something went wrong saving your details.</strong> Please try again or contact us.'
          );
          submitBtn.disabled = false;
          submitBtn.textContent = 'Submit details ‚ö°';
          return;
        }

        const data = await res.json();
        console.log('Supabase insert success:', data);

        showStatus('success',
          '<strong>‚úÖ Thank you ‚Äì</strong> we‚Äôve received your details. We‚Äôll be in touch shortly.'
        );

        // Optionally reset ‚Äì or leave so they can still see what they entered.
        form.reset();
        focusChips.forEach(chip => chip.classList.remove('selected'));
        currentStep = 4;
        updateStepDisplay();
        submitBtn.disabled = false;
        submitBtn.textContent = 'Submit details ‚ö°';
      } catch (err) {
        console.error('Network / fetch error:', err);
        showStatus('error',
          '<strong>‚ö†Ô∏è Something went wrong saving your details.</strong> Please try again or contact us.'
        );
        submitBtn.disabled = false;
        submitBtn.textContent = 'Submit details ‚ö°';
      }
    });
  </script>
</body>
</html>
